import{j as c}from"./jsx-runtime-f961835c.js";import{r as v,R as y}from"./index-f80c8c95.js";import{g as re}from"./i18n-d547729d.js";import{A as ne}from"./_AbstractCarousel-cbed7e46.js";import{B as ae}from"./_Button-4448554a.js";import{I as T}from"./_Image-9b5340ce.js";import{A as se}from"./_AbstractModal-d77dcd39.js";import{m as ie}from"./getSVGtext-6e71cb30.js";import{R as N}from"./index-64d4dcb8.js";import{c as A}from"./Gallery--landscape--large-1a6262ed.js";import"./focusElm-346ced9a.js";import"./getPageScrollElm-bb23cb91.js";import"./throttle-99eb2ade.js";import"./_useMobileMenuToggling-b033ca8f.js";import"./browserSide-4379edd8.js";import"./_Link-b7c9c4c9.js";import"./useGetSVGtext-0a2d93d5.js";import"./FocusTrap-f510b191.js";import"./useCallbackOnEsc-c69f5e0c.js";const w=v.createContext({}),O=t=>{const{caption:a,description:s,largeImageSrc:e,...n}=t,{setCurrentImage:r}=v.useContext(w);return c.jsxs("figure",{className:"GalleryItem",children:[c.jsx("figcaption",{className:"GalleryItem__caption",children:a}),e?c.jsxs(ae,{bem:"GalleryItem__button",href:e,onClick:o=>{o.preventDefault(),r({...n,caption:a,description:s,largeImageSrc:e})},children:[" ",c.jsx(T,{bem:"GalleryItem__image",...n})," "]}):c.jsx(T,{bem:"GalleryItem__image",...n}),s&&c.jsx("div",{className:"GalleryItem__description",children:s})]})};try{O.displayName="GalleryItem",O.__docgenInfo={description:"",displayName:"GalleryItem",props:{caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},largeImageSrc:{defaultValue:null,description:"",name:"largeImageSrc",required:!1,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!1,type:{name:"Source[]"}},src:{defaultValue:null,description:"The default image source to (lazy) load",name:"src",required:!1,type:{name:"string"}},preloadSrc:{defaultValue:null,description:"Eagerly-loaded placeholder/thunbnail to use until a `sources` item has been picked.",name:"preloadSrc",required:!1,type:{name:"string"}},inline:{defaultValue:null,description:"Should the image be fetched and inlined as <svg/>",name:"inline",required:!1,type:{name:"boolean"}},focalPoint:{defaultValue:null,description:"",name:"focalPoint",required:!1,type:{name:"string"}}}}}catch{}function G(){return G=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e])}return t},G.apply(this,arguments)}function K(t,a){if(t==null)return{};var s={},e=Object.keys(t),n,r;for(r=0;r<e.length;r++)n=e[r],!(a.indexOf(n)>=0)&&(s[n]=t[n]);return s}function P(t,a){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},P(t,a)}function Z(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,P(t,a)}function oe(t,a){return t.classList?!!a&&t.classList.contains(a):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+a+" ")!==-1}function le(t,a){t.classList?t.classList.add(a):oe(t,a)||(typeof t.className=="string"?t.className=t.className+" "+a:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+a))}function U(t,a){return t.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ue(t,a){t.classList?t.classList.remove(a):typeof t.className=="string"?t.className=U(t.className,a):t.setAttribute("class",U(t.className&&t.className.baseVal||"",a))}const k={disabled:!1},J=y.createContext(null);var Q=function(a){return a.scrollTop},_="unmounted",g="exited",x="entering",C="entered",L="exiting",f=function(t){Z(a,t);function a(e,n){var r;r=t.call(this,e,n)||this;var o=n,i=o&&!o.isMounting?e.enter:e.appear,l;return r.appearStatus=null,e.in?i?(l=g,r.appearStatus=x):l=C:e.unmountOnExit||e.mountOnEnter?l=_:l=g,r.state={status:l},r.nextCallback=null,r}a.getDerivedStateFromProps=function(n,r){var o=n.in;return o&&r.status===_?{status:g}:null};var s=a.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(n){var r=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==x&&o!==C&&(r=x):(o===x||o===C)&&(r=L)}this.updateStatus(!1,r)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var n=this.props.timeout,r,o,i;return r=o=i=n,n!=null&&typeof n!="number"&&(r=n.exit,o=n.enter,i=n.appear!==void 0?n.appear:o),{exit:r,enter:o,appear:i}},s.updateStatus=function(n,r){if(n===void 0&&(n=!1),r!==null)if(this.cancelNextCallback(),r===x){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this);o&&Q(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:_})},s.performEnter=function(n){var r=this,o=this.props.enter,i=this.context?this.context.isMounting:n,l=this.props.nodeRef?[i]:[N.findDOMNode(this),i],u=l[0],p=l[1],d=this.getTimeouts(),m=i?d.appear:d.enter;if(!n&&!o||k.disabled){this.safeSetState({status:C},function(){r.props.onEntered(u)});return}this.props.onEnter(u,p),this.safeSetState({status:x},function(){r.props.onEntering(u,p),r.onTransitionEnd(m,function(){r.safeSetState({status:C},function(){r.props.onEntered(u,p)})})})},s.performExit=function(){var n=this,r=this.props.exit,o=this.getTimeouts(),i=this.props.nodeRef?void 0:N.findDOMNode(this);if(!r||k.disabled){this.safeSetState({status:g},function(){n.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:L},function(){n.props.onExiting(i),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:g},function(){n.props.onExited(i)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(n,r){r=this.setNextCallback(r),this.setState(n,r)},s.setNextCallback=function(n){var r=this,o=!0;return this.nextCallback=function(i){o&&(o=!1,r.nextCallback=null,n(i))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},s.onTransitionEnd=function(n,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this),i=n==null&&!this.props.addEndListener;if(!o||i){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],p=l[1];this.props.addEndListener(u,p)}n!=null&&setTimeout(this.nextCallback,n)},s.render=function(){var n=this.state.status;if(n===_)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var i=K(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return y.createElement(J.Provider,{value:null},typeof o=="function"?o(n,i):y.cloneElement(y.Children.only(o),i))},a}(y.Component);f.contextType=J;f.propTypes={};function b(){}f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:b,onEntering:b,onEntered:b,onExit:b,onExiting:b,onExited:b};f.UNMOUNTED=_;f.EXITED=g;f.ENTERING=x;f.ENTERED=C;f.EXITING=L;const ce=f;var de=function(a,s){return a&&s&&s.split(" ").forEach(function(e){return le(a,e)})},I=function(a,s){return a&&s&&s.split(" ").forEach(function(e){return ue(a,e)})},$=function(t){Z(a,t);function a(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(i,l){var u=e.resolveArguments(i,l),p=u[0],d=u[1];e.removeClasses(p,"exit"),e.addClass(p,d?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(i,l)},e.onEntering=function(i,l){var u=e.resolveArguments(i,l),p=u[0],d=u[1],m=d?"appear":"enter";e.addClass(p,m,"active"),e.props.onEntering&&e.props.onEntering(i,l)},e.onEntered=function(i,l){var u=e.resolveArguments(i,l),p=u[0],d=u[1],m=d?"appear":"enter";e.removeClasses(p,m),e.addClass(p,m,"done"),e.props.onEntered&&e.props.onEntered(i,l)},e.onExit=function(i){var l=e.resolveArguments(i),u=l[0];e.removeClasses(u,"appear"),e.removeClasses(u,"enter"),e.addClass(u,"exit","base"),e.props.onExit&&e.props.onExit(i)},e.onExiting=function(i){var l=e.resolveArguments(i),u=l[0];e.addClass(u,"exit","active"),e.props.onExiting&&e.props.onExiting(i)},e.onExited=function(i){var l=e.resolveArguments(i),u=l[0];e.removeClasses(u,"exit"),e.addClass(u,"exit","done"),e.props.onExited&&e.props.onExited(i)},e.resolveArguments=function(i,l){return e.props.nodeRef?[e.props.nodeRef.current,i]:[i,l]},e.getClassNames=function(i){var l=e.props.classNames,u=typeof l=="string",p=u&&l?l+"-":"",d=u?""+p+i:l[i],m=u?d+"-active":l[i+"Active"],te=u?d+"-done":l[i+"Done"];return{baseClassName:d,activeClassName:m,doneClassName:te}},e}var s=a.prototype;return s.addClass=function(n,r,o){var i=this.getClassNames(r)[o+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;r==="appear"&&o==="done"&&u&&(i+=" "+u),o==="active"&&n&&Q(n),i&&(this.appliedClasses[r][o]=i,de(n,i))},s.removeClasses=function(n,r){var o=this.appliedClasses[r],i=o.base,l=o.active,u=o.done;this.appliedClasses[r]={},i&&I(n,i),l&&I(n,l),u&&I(n,u)},s.render=function(){var n=this.props;n.classNames;var r=K(n,["classNames"]);return y.createElement(ce,G({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a}(y.Component);$.defaultProps={classNames:""};$.propTypes={};const pe=$;var h={};Object.defineProperty(h,"__esModule",{value:!0});var me=Object.prototype.hasOwnProperty,E=function(t,a){return me.call(t,a)},D=function(t){return t.constructor?new t.constructor:Object.create(null)},Y=function(t){var a=D(t);for(var s in t)E(t,s)&&(a[s]=t[s]);return a};function fe(t,a,s){var e;for(var n in a){var r=t[n],o=a[n];r!==o&&E(a,n)&&!(s&&r&&o&&s(r,o,n))&&(e||(e=Y(t)),e[n]=a[n])}return e||t}var ve=function(t,a){var s,e=D(t);for(var n in t)if(E(t,n)){var r=t[n];r===void 0||r===null&&a?s=!0:e[n]=r}return s?e:t},he=function(t){for(var a in t)if(E(t,a))return!1;return!0},ge=function(t,a,s){return t[s]===a[s]};function ee(t,a,s){if(s===void 0&&(s=ge),t===a)return!0;var e=Object.keys(t);if(e.length!==Object.keys(a).length)return!1;for(var n=0;n<e.length;n++){var r=e[n];if(!E(a,r)||!s(t,a,r))return!1}return!0}var xe=function(t,a){var s,e=D(t);for(var n in t)E(t,n)&&(a.indexOf(n)>-1?e[n]=t[n]:s=!0);return s?e:t},ye=function(t,a){for(var s,e=a.length,n=0;n<e;n++){var r=a[n];E(t,r)&&(s=s||Y(t),delete s[r])}return s||t},Ee=function(t,a,s){return ee(t,a,s)?t:a},W=h.objectClean=ve;h.objectIsEmpty=he;var be=h.objectIsSame=ee;h.objectOnly=xe;h.objectReplace=Ee;h.objectUpdate=fe;h.objectWithout=ye;const M=t=>{const{bem:a="CarouselPaging",modifier:s,current:e,itemCount:n,setCurrent:r}=t,{next:o,prev:i,unit:l=""}=t.texts;return c.jsxs("div",{className:ie(a,s),children:[c.jsx("button",{className:`${a}__button ${a}__button--next`,type:"button",disabled:e>=n-1,onClick:()=>r(e+1),"aria-controls":t["aria-controls"],"aria-label":`${o} ${l}`,title:`${o} ${l}`,children:o})," ",c.jsx("button",{className:`${a}__button ${a}__button--prev`,type:"button",disabled:e===0,onClick:()=>r(e-1),"aria-controls":t["aria-controls"],"aria-label":`${i} ${l}`,title:`${i} ${l}`,children:i})]})};try{M.displayName="CarouselPaging",M.__docgenInfo={description:"",displayName:"CarouselPaging",props:{current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"number"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}},setCurrent:{defaultValue:null,description:"",name:"setCurrent",required:!0,type:{name:"(idx: number) => void"}},"aria-controls":{defaultValue:null,description:"",name:"aria-controls",required:!1,type:{name:"string"}},texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"Readonly<{ next: string; prev: string; unit?: string | undefined; }>"}},modifier:{defaultValue:null,description:`List of CSS BEM --modifier's to add to the component's main wrapper.

All falsy values are neatly skipped.`,name:"modifier",required:!1,type:{name:"ClassNameModifiers"}},bem:{defaultValue:null,description:"CSS BEM class-name prefix to be used for this component. Defaults to the same as the original component's displayName",name:"bem",required:!1,type:{name:"string"}}}}}catch{}const q=t=>{const{caption:a,description:s,...e}=t;return c.jsxs("div",{className:"GalleryModalItem",children:[(a||s)&&c.jsxs("div",{className:"GalleryModalItem__text",children:[c.jsx("div",{className:"GalleryModalItem__caption",children:a}),c.jsx("div",{className:"GalleryModalItem__description",children:s})]}),c.jsx(T,{bem:"GalleryModalItem__image",src:e.largeImageSrc||e.src})]})};try{q.displayName="GalleryModalItem",q.__docgenInfo={description:"",displayName:"GalleryModalItem",props:{caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},largeImageSrc:{defaultValue:null,description:"",name:"largeImageSrc",required:!1,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!1,type:{name:"Source[]"}},src:{defaultValue:null,description:"The default image source to (lazy) load",name:"src",required:!1,type:{name:"string"}},preloadSrc:{defaultValue:null,description:"Eagerly-loaded placeholder/thunbnail to use until a `sources` item has been picked.",name:"preloadSrc",required:!1,type:{name:"string"}},inline:{defaultValue:null,description:"Should the image be fetched and inlined as <svg/>",name:"inline",required:!1,type:{name:"boolean"}},focalPoint:{defaultValue:null,description:"",name:"focalPoint",required:!1,type:{name:"string"}}}}}catch{}const V=t=>{const{texts:a}=t,{currentImage:s,items:e,setCurrentImage:n}=v.useContext(w),[r,o]=v.useState(s),[i,l]=v.useState(!1),u=d=>{l(!i),setTimeout(()=>{n(e[d])},200)};if(v.useEffect(()=>{if(r!==s){const d=(s==null?void 0:s.largeImageSrc)||(s==null?void 0:s.src);if(d){const m=new window.Image;m.src=d,m.onload=()=>{o(s)}}else o(void 0)}},[r,s]),!r)return null;const p=e.findIndex(d=>be(W(r),W(d)));return c.jsxs(se,{open:!0,onClosed:()=>{n(void 0)},startOpen:!1,bem:"GalleryModal",texts:{closeButton:a.modalCloseLabel},children:[c.jsx(pe,{in:i,timeout:200,onEntered:()=>{l(!i)},classNames:"GalleryModalItem--",children:c.jsx(q,{...r})}),c.jsx(M,{bem:"GalleryModalPager",itemCount:e.length,current:p,setCurrent:u,texts:{next:a.modalNextLabel,prev:a.modalPrevLabel}})]})};try{V.displayName="GalleryModal",V.__docgenInfo={description:"",displayName:"GalleryModal",props:{texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"Readonly<GalleryI18n>"}}}}}catch{}const Ce={is:{modalNextLabel:"Næsta mynd",modalPrevLabel:"Fyrri mynd",modalCloseLabel:"Loka mynd"},en:{modalNextLabel:"Next image",modalPrevLabel:"Previous image",modalCloseLabel:"Close image"},pl:{modalNextLabel:"Następne zdjęcie",modalPrevLabel:"Poprzednie zdjęcie",modalCloseLabel:"Zamknij zdjęcie"}},R=t=>{const{items:a,ssr:s}=t,e=re(t,Ce),[n,r]=v.useState(void 0),o=v.useMemo(()=>({items:a,setCurrentImage:r,currentImage:n}),[a,n]);return c.jsxs(w.Provider,{value:o,children:[c.jsx(ne,{bem:"Gallery",items:a,Component:O,ssr:s,wrapperProps:t.wrapperProps}),c.jsx(V,{...n,texts:e})]})};try{R.displayName="Gallery",R.__docgenInfo={description:"",displayName:"Gallery",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"GalleryItemProps[]"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"GalleryI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"enum",value:[{value:'"is"'},{value:'"en"'},{value:'"pl"'}]}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:"HTMLProps<null, never>"}},startSeen:{defaultValue:null,description:"@deprecated This prop does nothing nowadays (Will be removed in v0.11)",name:"startSeen",required:!1,type:{name:"boolean"}}}}}catch{}const z=""+new URL("Gallery--landscape-2189a681.jpg",import.meta.url).href,j=""+new URL("Gallery--portrait-761aaeee.jpg",import.meta.url).href,X=""+new URL("Gallery--portrait--large-e00de2e5.jpg",import.meta.url).href,We={title:"Gallery",parameters:{controls:{hideNoControlsWarning:!0},viewport:{defaultViewport:"responsive"}}},_e=[{caption:"Elliðaárdalur",largeImageSrc:A,src:z},{caption:"long caption here to test how this can break the layout",largeImageSrc:X,src:j,altText:"Elliðaárdalur alt text"},{largeImageSrc:A,src:z},{caption:"Test incorrect ratio",description:"Some description to go along with this image",largeImageSrc:X,src:j},{caption:"This one has a caption",src:j}],S={render:()=>c.jsx(R,{items:_e})};var B,F,H;S.parameters={...S.parameters,docs:{...(B=S.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: () => <Gallery items={galleryData} />
}`,...(H=(F=S.parameters)==null?void 0:F.docs)==null?void 0:H.source}}};const ze=["_Gallery"];export{S as _Gallery,ze as __namedExportsOrder,We as default};
//# sourceMappingURL=Gallery.stories-2df15cad.js.map

import{j as a}from"./jsx-runtime-f961835c.js";import{r as n}from"./index-f80c8c95.js";import{m as B}from"./classUtils-ef6e60eb.js";import{f as T}from"./focusElm-346ced9a.js";import{g as N}from"./i18n-18e56484.js";import{F as x}from"./FocusTrap-56c2452f.js";import{u as P}from"./browserSide-4379edd8.js";import"./_Link-b7c9c4c9.js";import{u as A}from"./_useMobileMenuToggling-0971be40.js";import"./getSVGtext-8f35f9ab.js";import{u as j}from"./useCallbackOnEsc-c69f5e0c.js";import{r as I}from"./index-64d4dcb8.js";const F=()=>{const e=document.createElement("div");return document.body.appendChild(e),e},C=({getRoot:e,children:t})=>{const[l,c]=n.useState(null);return n.useEffect(()=>{const o=(e||F)();return c(o),()=>o.remove()},[]),l&&I.createPortal(t,l)};try{C.displayName="Portal",C.__docgenInfo={description:"",displayName:"Portal",props:{getRoot:{defaultValue:null,description:"",name:"getRoot",required:!1,type:{name:"(() => Element)"}}}}}catch{}const q="modal-open",g=typeof window<"u"?window:void 0,u=g?g.$$modalStack||(g.$$modalStack=[]):[],E=e=>{document.documentElement.classList.add(q),u.unshift(e)},M=e=>{const t=u.indexOf(e);t>-1&&u.splice(t,1),u.length<=0&&document.documentElement.classList.remove(q)},$={is:{closeButton:"Loka",closeButtonLabel:"Loka þessum glugga"},en:{closeButton:"Close",closeButtonLabel:"Close this window"},pl:{closeButton:"Zamknij",closeButtonLabel:"Zamknij to okno"}},O=e=>{const{bem:t,modifier:l,closeDelay:c=500,wrapperProps:o={},ssr:V}=e,v=!(e.stable??e.fickle===!1)||void 0,m=N(e,$),p=P(V),s=A(),f=o.id||s,k=n.useRef(null),[r,w]=n.useState(()=>!!e.startOpen&&e.open!==!1),_=()=>{r||(E(s),setTimeout(()=>{w(!0),e.onOpen&&e.onOpen(),T.focusElm(k.current)},100))},i=()=>{r&&(w(!1),M(s),e.onClose&&e.onClose(),setTimeout(e.onClosed,c))},h=n.useRef(e.open);e.open!==h.current&&e.open!==r&&(h.current=e.open,e.open?_():i()),h.current=e.open;const b=v&&(d=>{d.target===d.currentTarget&&i()});j(v&&(()=>{u[0]===f&&i()})),n.useEffect(()=>(r?E(s):e.open&&_(),()=>M(s)),[]);const D=e.portal!==!1?C:n.Fragment,L=e.render?e.render({closeModal:i}):e.children,S=m.closeButtonLabel||m.closeButton,{onClick:y,className:R}=o;return a.jsx(D,{children:a.jsxs("div",{...o,className:B(`${t}wrapper`,[l,R]),hidden:!r,role:"dialog",onClick:b&&y?d=>{b(d),y(d)}:b||y,id:f,children:[p&&a.jsx(x,{atTop:!0}),a.jsxs("div",{className:B(t,l),ref:k,children:[L,p&&!e.noCloseButton&&a.jsx("button",{className:`${t}__closebutton`,type:"button",onClick:i,"aria-label":S,"aria-controls":f,title:S,children:m.closeButton})]}),p&&a.jsx(x,{atTop:!0})]})})};try{O.displayName="AbstractModal",O.__docgenInfo={description:"",displayName:"AbstractModal",props:{closeDelay:{defaultValue:null,description:"The transition delay until closing the modal triggers `onClosed()`\n\nDefault: `500`",name:"closeDelay",required:!1,type:{name:"number"}},open:{defaultValue:null,description:"Indicates if teh Modal should be open or closed. To trigger opening or closing, simply flip this flag.\n\nDefault: `true`",name:"open",required:!1,type:{name:"boolean"}},startOpen:{defaultValue:null,description:'Set this to `true` for Modals that should render as if they always existed and had already been opened.\n\nA Modal that "starts open" will not CSS transition in, and will not trigger its `onOpen` callback on mount.\n\nDefault: `false`',name:"startOpen",required:!1,type:{name:"boolean"}},stable:{defaultValue:null,description:"By default all modals close on ESC and outside clicks.\nSet thtis to `true` to disable this behaviour.",name:"stable",required:!1,type:{name:"boolean"}},noCloseButton:{defaultValue:null,description:"Hides the (x) close button",name:"noCloseButton",required:!1,type:{name:"boolean"}},fickle:{defaultValue:null,description:"@deprecated Use `stable` prop instead  (Will be removed in v0.11)\n\nDefault: `true`\n\nThe inverse of the `stable` prop. If both `fickle` and `stable` are\ndefined then `stable` takes precedence.",name:"fickle",required:!1,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"Convenience callback that runs as soon as the `open` flag flips to `true` – including on initial opening.\n\nHowever, the initial `onOpen` is skipped  `startOpen` is set to `true`.",name:"onOpen",required:!1,type:{name:"(() => void)"}},onClose:{defaultValue:null,description:"Convenience callback that runs as soon as the `open` flag flips to `false`",name:"onClose",required:!1,type:{name:"(() => void)"}},onClosed:{defaultValue:null,description:"Callback that runs when the modal closes – **after** `closeDelay` has elaped.",name:"onClosed",required:!0,type:{name:"() => void"}},texts:{defaultValue:null,description:"Default:\n```\n{\n  closeButton: 'Close',\n  closeButtonLabel: 'Close this window',\n}\n```",name:"texts",required:!1,type:{name:"Readonly<{ closeButton: string; closeButtonLabel?: string; }>"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},portal:{defaultValue:null,description:"Should the modal be mounted in a Portal component `<div/>`\nlocated outside the ReactDOM.render root element?\n\nDefault: `true`",name:"portal",required:!1,type:{name:"boolean"}},render:{defaultValue:null,description:"Render function that receives a `closeModal` action dispatcher.",name:"render",required:!1,type:{name:"((props: { closeModal(): void; }) => ReactNode)"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<"div", "hidden" | "role">'}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},modifier:{defaultValue:null,description:`List of CSS BEM --modifier's to add to the component's main wrapper.

All falsy values are neatly skipped.`,name:"modifier",required:!1,type:{name:"Modifiers"}},bem:{defaultValue:null,description:"CSS BEM class-name prefix to be used for this component. Defaults to the same as the original component's displayName",name:"bem",required:!0,type:{name:"string"}}}}}catch{}export{O as A};
//# sourceMappingURL=_AbstractModal-88db2d93.js.map

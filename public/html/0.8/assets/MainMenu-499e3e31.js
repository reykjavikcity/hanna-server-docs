import{j as n}from"./jsx-runtime-f961835c.js";import{r as g}from"./index-f80c8c95.js";import{m as _}from"./classUtils-ef6e60eb.js";import{f as O}from"./focusElm-346ced9a.js";import{g as w,D}from"./i18n-d547729d.js";import{L as q}from"./_Link-b7c9c4c9.js";import{g as $}from"./assets-b24d1fcc.js";import{c as J,M as K,e as Q,h as X,u as Y}from"./_useMobileMenuToggling-15a67498.js";import{u as ee}from"./browserSide-4379edd8.js";import"./getSVGtext-8f35f9ab.js";const I=e=>{const{title:r,id:l,items:d,image:i}=e,o=i&&$(i);return n.jsxs("li",{className:"AuxiliaryPanel",id:l,style:o?{"--menu-auxiliary-image":`url(${o})`}:void 0,children:[n.jsx("h3",{className:"AuxiliaryPanel__title",children:r}),n.jsx("ul",{className:"AuxiliaryPanel__items",children:d.map((t,m)=>n.jsx("li",{className:_("AuxiliaryPanel__item",t.modifier),"aria-current":t.current||void 0,children:t.Content?n.jsx(t.Content,{}):n.jsx(q,{className:"AuxiliaryPanel__link",href:t.href,target:t.target,lang:t.lang,children:t.label})},m))})]})};try{I.displayName="AuxiliaryPanel",I.__docgenInfo={description:"",displayName:"AuxiliaryPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:'(Omit<{ current?: boolean | undefined; } & BemModifierProps & Cleanup<{ label: string; summary?: string | undefined; href: string; lang?: string | undefined; hrefLang?: string | undefined; target?: HTMLAttributeAnchorTarget | undefined; } & { ...; }>, "summary"> | Omit<...>)[]'}},image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"enum",value:[{value:'"hanna-veitiggi"'},{value:'"hanna-vandro"'},{value:'"hanna-hugsi"'},{value:'"hanna-hissa"'},{value:'"hanna-hahaha"'},{value:'"hanna-hae"'},{value:'"hanna-god_spurning"'},{value:'"hanna-gjuggiborg"'},{value:'"hanna-benda"'}]}}}}}catch{}const T=e=>{const{setActivePanel:r,panel:l,isParent:d,isActive:i,isBrowser:o,texts:t}=e,{items:m}=l;return n.jsxs("li",{ref:i?e.activeRef:void 0,className:_("PrimaryPanel",[d&&"parent",i&&"active",m.length>5&&"twocol"]),id:l.id,children:[n.jsxs("h3",{className:"PrimaryPanel__title",children:[" ",o&&!i?n.jsx("button",{className:"MainMenu__mega__title-toggler","aria-controls":l.id,onClick:()=>r(l,!1),"aria-pressed":i,type:"button",children:l.title}):l.title]}),n.jsx("ul",{className:"PrimaryPanel__items",children:m.map((s,p)=>n.jsx("li",{className:_("PrimaryPanel__item",s.modifier),"aria-current":s.current||void 0,children:s.Content?n.jsx(s.Content,{}):n.jsxs(q,{className:"PrimaryPanel__link",href:s.href,target:s.target,lang:s.lang,hrefLang:s.hrefLang,children:[n.jsx("span",{className:"PrimaryPanel__linkTitle",children:s.label})," ",n.jsx("small",{className:"PrimaryPanel__summary",children:s.summary})," "]})},p))}),o&&i&&n.jsx("button",{className:"MainMenu__megapanel__backtomenu","aria-controls":l.id,"aria-label":t.backToMenuLong,onClick:()=>r(void 0),type:"button",children:t.backToMenu})]})};try{T.displayName="PrimaryPanel",T.__docgenInfo={description:"",displayName:"PrimaryPanel",props:{setActivePanel:{defaultValue:null,description:"",name:"setActivePanel",required:!0,type:{name:"(panel: MegaMenuPanel | undefined, setFocus?: boolean | undefined) => void"}},isParent:{defaultValue:null,description:"",name:"isParent",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},panel:{defaultValue:null,description:"",name:"panel",required:!0,type:{name:"MegaMenuPanel"}},texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"PrimaryPanelI18n"}},activeRef:{defaultValue:null,description:"",name:"activeRef",required:!0,type:{name:"RefObject<HTMLLIElement>"}},isBrowser:{defaultValue:null,description:"",name:"isBrowser",required:!0,type:{name:"true | undefined"}}}}}catch{}const ne=0,ae=(e,r=ne)=>{const[l,d]=g.useState(e),i=g.useRef(),o=()=>{i.current&&clearTimeout(i.current)},t=g.useRef((m,s=r)=>{d(m),o(),i.current=setTimeout(()=>{i.current=null,d(void 0)},s)}).current;return g.useEffect(()=>(e!==void 0&&t(e,r),o),[]),[l,t]},te={is:{togglerLabel:"Opna/loka Aðalvalmynd",closeMenuLabel:"Loka",closeMenuLabelLong:"Loka aðalvalmynd"},en:{togglerLabel:"Toggle Main Menu",closeMenuLabel:"Close",closeMenuLabelLong:"Close main menu"},pl:{togglerLabel:"Otwórz/zamknij menu główne",closeMenuLabel:"Zamknij",closeMenuLabelLong:"Zamknij menu główne"}},N=e=>{const{isMenuActive:r,isMenuOpen:l,uiState:d,closeMenu:i,toggleMenu:o}=J({doInitialize:e.ssr!=="ssr-only"}),t=w(e,te);return n.jsxs(n.Fragment,{children:[r&&n.jsx("button",{className:"MobileMenuToggler",onClick:o,"aria-controls":e.controlsId,"aria-pressed":l,children:t.togglerLabel}),n.jsx(K,{value:d,children:e.children}),r&&n.jsx("button",{className:"MobileMenuToggler__closebutton",onClick:i,"aria-label":t.closeMenuLabelLong,type:"button",children:t.closeMenuLabel})]})};try{N.displayName="MobileMenuToggler",N.__docgenInfo={description:"A wrapper component that handles conditional hiding/toggling\nbehavior, similar to the one `MainMenu` uses.",displayName:"MobileMenuToggler",props:{controlsId:{defaultValue:null,description:"The DOM id of the menu that is being toggled",name:"controlsId",required:!0,type:{name:"string"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"MobileMenuTogglerI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}}}}}catch{}const F=(e,r)=>r?e.find(l=>r===l.id):void 0,U={netbook:1,wide:1},V={is:{title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},le=(e,r,l,d)=>{const i=e.map(t=>{if(t==="---"||!("label"in t))return t;const m=t.href,s=t.controlsId||m&&/^#/.test(m)&&m.slice(1)||void 0,p=s?r.find(P=>P.id===s):void 0;return{...t,controlsId:s,megaPanel:p}}),o=i[0];return o&&(typeof o=="object"&&o.modifier==="home"||((!l||typeof l=="string")&&(l={href:l||"/",label:d.homeLabel||V[D].homeLabel,lang:d.homeLabel?void 0:D}),i.unshift({...l,modifier:"home"}))),i},re=[],j=e=>{const{megaPanels:r=re,onItemClick:l,ssr:d,auxiliaryPanel:i,wrapperProps:o={}}=e,t=w(e,V),m=e.title||t.title,{closeHamburgerMenu:s}=Q(),p=ee(d),P=g.useRef(null),A=o.ref||P,C=g.useRef(null),E=g.useRef(null),[y,z]=g.useState(()=>p&&F(r,e.activePanelId)),[Z,x]=ae(),h=g.useMemo(()=>p?(a,c=!0)=>{const f=document.documentElement,u=f.dataset;z(M=>{if(a?(x(void 0,0),u.scrollTop=String(f.scrollTop),f.scrollTop=0,u.megaPanelActive=""):(M&&x(M,1e3),f.scrollTop=parseInt(u.scrollTop||"")||0,delete u.scrollTop,delete u.megaPanelActive),c){const b=C.current;setTimeout(()=>{a?a!==M&&O.focusElm(E.current):O.focusElm(b)},100)}return a})}:()=>{},[x,p]);X(a=>{!U[a.is]&&U[a.was||""]&&h(void 0)});const R=!!y,S=g.useMemo(()=>le(e.items,r,e.homeLink,t),[e.items,e.homeLink,r,t]);if(g.useEffect(()=>{h(F(r,e.activePanelId))},[e.activePanelId,r,h]),g.useEffect(()=>{const a=A.current;if(!p||!R||!a)return;const c=u=>{u.key==="Escape"&&h(void 0)},f=u=>{a.contains(u.target)||h(void 0)};return document.addEventListener("keydown",c),document.addEventListener("click",f,!0),()=>{document.removeEventListener("keydown",c),document.removeEventListener("click",f,!0)}},[R,h,p]),S.length===0)return null;const G=a=>{a.target.closest("a[href]")&&(h(void 0),s())};return n.jsxs("nav",{...e.wrapperProps,className:_("MainMenu",null,o.className),"aria-label":m,"data-sprinkled":p,ref:A,children:[n.jsx("h2",{className:"MainMenu__title",children:m}),n.jsx("ul",{className:"MainMenu__items",children:S.map((a,c)=>{if(a==="---")return n.jsx("li",{className:"MainMenu__separator","aria-hidden":"true"},c);if(!("label"in a)){const v=a;return n.jsx("li",{className:"MainMenu__item",children:n.jsx(v,{})},c)}const{label:f,labelLong:u,lang:M,controlsId:b,onClick:k}=a,H=y&&b===y.id||void 0;return n.jsx("li",{className:_("MainMenu__item",a.modifier),"aria-current":a.current||void 0,children:p&&(a.megaPanel||k)?n.jsx("button",{className:"MainMenu__link",onClick:()=>{const v=k&&k(c,a)===!1,W=l&&l(c,a)===!1,{megaPanel:L}=a;L?h(L!==y?L:void 0):!(v||W)&&s()},ref:H&&C,"aria-pressed":H,"aria-controls":b,"aria-label":u,title:u,lang:M,type:"button",children:f}):a.href!=null?n.jsx(q,{className:"MainMenu__link",href:a.href,target:a.target,"aria-label":u,title:u,onClick:()=>{!(l&&l(c,a)===!1)&&s()},lang:M,hrefLang:a.hrefLang,children:f}):void 0},c)})}),`

`,r.length>0&&n.jsx("div",{className:_("MainMenu__panelsWrap",[y&&"active"]),children:n.jsxs("ul",{className:"MainMenu__panels",onClick:G,children:[r.map((a,c)=>{if(!a.items.length)return;const f=y===a||Z===a||void 0,u=!!a.items.find(M=>M.current);return n.jsx(T,{isParent:u,isActive:f,panel:a,isBrowser:p,setActivePanel:h,texts:t,activeRef:E},c)}),i&&n.jsx(I,{...i})]})})]})},B=e=>{const r=e.wrapperProps,l=Y(r&&r.id),d=r?{...r,id:l}:{id:l},i=w(e,V);return n.jsx(N,{ssr:e.ssr,lang:e.lang,texts:i.togglerLabel?i:void 0,controlsId:l,children:n.jsx(j,{...e,wrapperProps:d})})};try{j.displayName="_MainMenu",j.__docgenInfo={description:"",displayName:"_MainMenu",props:{title:{defaultValue:null,description:`Top-level screen-reader headline/label for the whole menu.
Defaults to a translation of "Main Menu"`,name:"title",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"MainMenuItemList"}},homeLink:{defaultValue:null,description:'Link for the homepage - defaults to `"/"` adding a\ngeneric sounding "Home"/"Forsíða" label',name:"homeLink",required:!1,type:{name:'string | Omit<MainMenuItem, "modifier">'}},megaPanels:{defaultValue:null,description:"",name:"megaPanels",required:!1,type:{name:"MegaMenuPanel[]"}},auxiliaryPanel:{defaultValue:null,description:"",name:"auxiliaryPanel",required:!1,type:{name:"AuxiliaryPanelProps"}},onItemClick:{defaultValue:null,description:'NOTE: Clicking a MainMenu item will automatically close HannaUIState\'s\n"Hamburger menu" (a.k.a. "Mobile menu")\n… unless the `onItemClick` function explicitly returns `false`.',name:"onItemClick",required:!1,type:{name:"((index: number, item: MainMenuItem) => boolean | void)"}},activePanelId:{defaultValue:null,description:"",name:"activePanelId",required:!1,type:{name:"string"}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"MainMenuI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<null, "aria-label">'}}}}}catch{}try{B.displayName="MainMenu",B.__docgenInfo={description:"",displayName:"MainMenu",props:{title:{defaultValue:null,description:`Top-level screen-reader headline/label for the whole menu.
Defaults to a translation of "Main Menu"`,name:"title",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"MainMenuItemList"}},homeLink:{defaultValue:null,description:'Link for the homepage - defaults to `"/"` adding a\ngeneric sounding "Home"/"Forsíða" label',name:"homeLink",required:!1,type:{name:'string | Omit<MainMenuItem, "modifier">'}},megaPanels:{defaultValue:null,description:"",name:"megaPanels",required:!1,type:{name:"MegaMenuPanel[]"}},auxiliaryPanel:{defaultValue:null,description:"",name:"auxiliaryPanel",required:!1,type:{name:"AuxiliaryPanelProps"}},onItemClick:{defaultValue:null,description:'NOTE: Clicking a MainMenu item will automatically close HannaUIState\'s\n"Hamburger menu" (a.k.a. "Mobile menu")\n… unless the `onItemClick` function explicitly returns `false`.',name:"onItemClick",required:!1,type:{name:"((index: number, item: MainMenuItem) => boolean | void)"}},activePanelId:{defaultValue:null,description:"",name:"activePanelId",required:!1,type:{name:"string"}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"MainMenuI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<null, "aria-label">'}}}}}catch{}export{B as M};
//# sourceMappingURL=MainMenu-499e3e31.js.map

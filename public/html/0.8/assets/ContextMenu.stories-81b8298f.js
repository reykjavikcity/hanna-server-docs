import{j as l}from"./jsx-runtime-f961835c.js";import{r as C}from"./index-f80c8c95.js";import{u as E,f as z,s as B,b as R}from"./floating-ui.react.esm-4d91271d.js";import{m as s}from"./getSVGtext-6e71cb30.js";import{B as F}from"./_Button-2ca4bd3a.js";import{u as D}from"./useCallbackOnEsc-c69f5e0c.js";import{u as P}from"./useLaggedState-9e937430.js";import{u as H}from"./useOnClickOutside-2e1471b7.js";import{F as J}from"./FocusTrap-08bc24ce.js";import{u as X}from"./browserSide-4379edd8.js";import"./_Link-b7c9c4c9.js";import"./_useMobileMenuToggling-b033ca8f.js";import"./index-64d4dcb8.js";const d=a=>{const[o,i]=P(!1,10),I=X(a.ssr),[j,p]=C.useState(!1),f=C.useRef(null),r=()=>i(!1,0);H(f,o&&r),D(o&&r);const{x:_,y:O,refs:y}=E({placement:"bottom-start",middleware:[z(),B()],whileElementsMounted:R}),{onItemClick:n,wrapperProps:u={}}=a,h=e=>{e.preventDefault(),i(!o,0)};return l.jsxs("details",{...u,className:s("ContextMenu",o&&"open",u.className),open:o,onBlur:e=>{var t;j||i(!1,300),(t=u.onBlur)==null||t.call(u,e)},ref:e=>{e&&(f.current=e,y.setReference(e.querySelector(".ContextMenu__toggler")),y.setFloating(e.querySelector(".ContextMenu__menu")))},children:[a.Toggler?l.jsx("summary",{className:"ContextMenu__toggler",onClick:h,children:l.jsx(a.Toggler,{isOpen:o})}):l.jsx(F,{as:"summary",className:"ContextMenu__toggler",bem:a.togglerType==="primary"?"ButtonPrimary":"ButtonSecondary",icon:a.togglerIcon,size:a.togglerSize,variant:a.togglerVariant,"aria-label":a.labelLong,onClick:h,children:a.label}),l.jsxs("ul",{className:"ContextMenu__menu",onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},onFocus:()=>{i(!0,0)},style:_!=null?{"--ContextMenu-pos-y":`${O}px`,"--ContextMenu-pos-x":`${_}px`}:void 0,children:[a.items.map((e,t)=>{if("divider"in e)return t===0&&!e.label||t===a.items.length-1?null:l.jsx("li",{className:s("ContextMenu__itemDivider",e.label&&"labelled"),children:e.label||!1},t);typeof e=="function"&&(e={Content:e});const q={className:s("ContextMenu__item",e.modifier),"aria-current":e.current||void 0};if("Content"in e&&e.Content)return l.jsx("li",{"data-customitem":"",...q,children:l.jsx(e.Content,{closeMenu:r})},t);const{label:b,onClick:g,href:m,destructive:L}=e,x={className:s("ContextMenu__itembutton",L&&"destructive"),lang:e.lang,"data-icon":e.icon,"arial-label":e.labelLong},N=I&&(g||n&&m==null),v=e;return l.jsx("li",{className:s("ContextMenu__item",e.modifier),"aria-current":e.current||void 0,children:N?l.jsx("button",{...x,type:"button","aria-controls":e.controlsId,onClick:()=>{const w=g&&g(v)===!1,V=n&&n(v)===!1;!(w||V)&&r()},children:b}):m!=null?l.jsx("a",{...x,href:m,hrefLang:e.hrefLang,target:e.target,onClick:()=>{!(n&&n(v)===!1)&&r()},children:b}):null},t)}),l.jsx(J,{Tag:"li",depth:2})]})]})};try{d.displayName="ContextMenu",d.__docgenInfo={description:"",displayName:"ContextMenu",props:{items:{defaultValue:null,description:"The items to display inside the dropdown menu",name:"items",required:!0,type:{name:"(ContextMenuItem | ContextMenuCustomItem | ContextMenuItemDivider)[]"}},onItemClick:{defaultValue:null,description:"NOTE: Clicking a ContextMenu item will automatically close the drropdown\n… unless the `onItemClick` function explicitly returns `false`.\n\n**NOTE:** Customm items will need to call `closeMenu()` themselves.",name:"onItemClick",required:!1,type:{name:"((item: ContextMenuItem) => boolean | void)"}},label:{defaultValue:null,description:"Label for the toggler",name:"label",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},labelLong:{defaultValue:null,description:"Longer accessible toggler label text",name:"labelLong",required:!1,type:{name:"string"}},togglerType:{defaultValue:null,description:'Default: `"secondary"`',name:"togglerType",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'}]}},togglerSize:{defaultValue:null,description:"",name:"togglerSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"wide"'},{value:'"normal"'}]}},togglerIcon:{defaultValue:null,description:"",name:"togglerIcon",required:!1,type:{name:"enum",value:[{value:'"docs"'},{value:'"link"'},{value:'"menu"'},{value:'"search"'},{value:'"timer"'},{value:'"download"'},{value:'"info"'},{value:'"warning"'},{value:'"error"'},{value:'"send"'},{value:'"go-back"'},{value:'"go-forward"'},{value:'"account_circle"'},{value:'"add"'},{value:'"add_circle"'},{value:'"arrow_back"'},{value:'"arrow_back_ios_new"'},{value:'"arrow_downward"'},{value:'"arrow_forward"'},{value:'"arrow_forward_ios"'},{value:'"arrow_upward"'},{value:'"attach_file"'},{value:'"calendar_clock"'},{value:'"calendar_month"'},{value:'"call"'},{value:'"category"'},{value:'"check"'},{value:'"check_box"'},{value:'"check_box_filled"'},{value:'"check_circle"'},{value:'"chevron_backward"'},{value:'"chevron_forward"'},{value:'"close"'},{value:'"close_small"'},{value:'"contacts"'},{value:'"content_copy"'},{value:'"create_new_folder"'},{value:'"delete"'},{value:'"done_all"'},{value:'"draft"'},{value:'"edit"'},{value:'"error_filled"'},{value:'"exit_to_app"'},{value:'"fast_forward"'},{value:'"fast_rewind"'},{value:'"favorite"'},{value:'"favorite_filled"'},{value:'"feedback"'},{value:'"filter_alt"'},{value:'"filter_list"'},{value:'"font_download"'},{value:'"format_bold"'},{value:'"format_h1"'},{value:'"format_h2"'},{value:'"format_h3"'},{value:'"format_list_bulleted"'},{value:'"format_quote"'},{value:'"format_underlined"'},{value:'"forum"'},{value:'"frame_person"'},{value:'"groups"'},{value:'"help"'},{value:'"help_center"'},{value:'"home"'},{value:'"home_repair_service"'},{value:'"home_work"'},{value:'"hourglass"'},{value:'"info_filled"'},{value:'"keep"'},{value:'"keep_off"'},{value:'"keyboard_arrow_down"'},{value:'"keyboard_arrow_up"'},{value:'"language"'},{value:'"light_mode"'},{value:'"local_parking"'},{value:'"local_taxi"'},{value:'"location_on"'},{value:'"lock"'},{value:'"lock_open"'},{value:'"login"'},{value:'"logout"'},{value:'"mail"'},{value:'"more_horiz"'},{value:'"notes"'},{value:'"notifications"'},{value:'"open_in_full"'},{value:'"open_in_new"'},{value:'"pan_zoom"'},{value:'"pause"'},{value:'"person"'},{value:'"person_add"'},{value:'"person_pin"'},{value:'"pets"'},{value:'"photo"'},{value:'"picture_as_pdf"'},{value:'"pie_chart"'},{value:'"play_arrow"'},{value:'"print"'},{value:'"refresh"'},{value:'"remove"'},{value:'"report"'},{value:'"right_panel_close"'},{value:'"right_panel_open"'},{value:'"rotate_right"'},{value:'"schedule"'},{value:'"school"'},{value:'"search_activity"'},{value:'"sell"'},{value:'"settings"'},{value:'"swap_vert"'},{value:'"tune"'},{value:'"upload"'},{value:'"vertical_align_bottom"'},{value:'"visibility"'},{value:'"visibility_off"'},{value:'"warning_filled"'},{value:'"work"'},{value:'"zoom_in"'},{value:'"zoom_out"'}]}},togglerVariant:{defaultValue:null,description:"",name:"togglerVariant",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"destructive"'}]}},Toggler:{defaultValue:null,description:"Custom toggler rendering function component",name:"Toggler",required:!1,type:{name:"((props: { isOpen: boolean; }) => ReactElement<any, string | JSXElementConstructor<any>>)"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<"details", "name" | "open">'}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}}}}}catch{}const te={title:"ContextMenu",parameters:{viewport:{defaultViewport:"responsive"}}},k=[{label:"Edit with onClick",icon:"edit",onClick:()=>alert("Edit")},{label:l.jsxs(l.Fragment,{children:["Something else with ",l.jsx("small",{children:"some JSX"})," and a long label"]}),href:"",current:!0},{label:"Some stuff",icon:"document",href:""},{label:"Delete",href:""}],c={render:a=>a.togglerType==="custom"?l.jsx(d,{Toggler:({isOpen:o})=>l.jsxs("span",{style:{display:"block",background:"yellow",padding:"8px"},"aria-label":"Longer text for toggler",children:["Custom toggler ",o?"▲":"▼"]}),items:k}):l.jsx(d,{label:"Toggler label",labelLong:"Optional longer toggler label",togglerType:a.togglerType,togglerSize:a.smallToggler?"small":void 0,items:k}),argTypes:{togglerType:{name:"Toggler type",options:["secondary","primary","custom"],control:"inline-radio"},smallToggler:{name:"Small toggler",if:{arg:"buttonType",neq:"custom"}}},args:{togglerType:"secondary",smallToggler:!1}};var T,M,S;c.parameters={...c.parameters,docs:{...(T=c.parameters)==null?void 0:T.docs,source:{originalSource:`{
  render: args => args.togglerType === 'custom' ? <ContextMenu Toggler={({
    isOpen
  }) => <span style={{
    display: 'block',
    background: 'yellow',
    padding: '8px'
  }} aria-label="Longer text for toggler">
            Custom toggler {isOpen ? '▲' : '▼'}
          </span>} items={mockItems} /> : <ContextMenu label="Toggler label" labelLong="Optional longer toggler label" togglerType={args.togglerType} togglerSize={args.smallToggler ? 'small' : undefined} items={mockItems} />,
  argTypes: {
    togglerType: {
      name: 'Toggler type',
      options: ['secondary', 'primary', 'custom'],
      control: 'inline-radio'
    },
    smallToggler: {
      name: 'Small toggler',
      if: {
        arg: 'buttonType',
        neq: 'custom'
      }
    }
  },
  args: {
    togglerType: 'secondary',
    smallToggler: false
  }
}`,...(S=(M=c.parameters)==null?void 0:M.docs)==null?void 0:S.source}}};const re=["_ContextMenu"];export{c as _ContextMenu,re as __namedExportsOrder,te as default};
//# sourceMappingURL=ContextMenu.stories-81b8298f.js.map

import{j as p}from"./jsx-runtime-f961835c.js";import{r as f,R as E,g as re}from"./index-f80c8c95.js";import{g as ae}from"./i18n-18e56484.js";import{A as ne}from"./_AbstractCarousel-1efa1eeb.js";import{B as se}from"./_Button-f8e7ee7f.js";import{I as O}from"./_Image-73a64cfc.js";import{a as oe}from"./getBemClass-701a9212.js";import{M as ie}from"./Modal-ba716dc8.js";import{R as N}from"./index-64d4dcb8.js";import{c as $}from"./Gallery--landscape--large-1a6262ed.js";import"./classUtils-ef6e60eb.js";import"./focusElm-346ced9a.js";import"./getPageScrollElm-bb23cb91.js";import"./throttle-99eb2ade.js";import"./getSVGtext-8f35f9ab.js";import"./getScrollbarWidth-108c5f9b.js";import"./browserSide-4379edd8.js";import"./_Link-b7c9c4c9.js";import"./useGetSVGtext-c22e972a.js";import"./domid-a414b1fb.js";const V=f.createContext({}),G=e=>{const{caption:n,description:s,largeImageSrc:t,...r}=e,{setCurrentImage:a}=f.useContext(V);return p.jsxs("figure",{className:"GalleryItem",children:[p.jsx("figcaption",{className:"GalleryItem__caption",children:n}),t?p.jsxs(se,{bem:"GalleryItem__button",href:t,onClick:i=>{i.preventDefault(),a({...r,caption:n,description:s,largeImageSrc:t})},children:[" ",p.jsx(O,{bem:"GalleryItem__image",...r})," "]}):p.jsx(O,{bem:"GalleryItem__image",...r}),s&&p.jsx("div",{className:"GalleryItem__description",children:s})]})};try{G.displayName="GalleryItem",G.__docgenInfo={description:"",displayName:"GalleryItem",props:{caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},largeImageSrc:{defaultValue:null,description:"",name:"largeImageSrc",required:!1,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!1,type:{name:"Source[]"}},src:{defaultValue:null,description:"The default image source to (lazy) load",name:"src",required:!1,type:{name:"string"}},preloadSrc:{defaultValue:null,description:"Eagerly-loaded placeholder/thunbnail to use until a `sources` item has been picked.",name:"preloadSrc",required:!1,type:{name:"string"}},inline:{defaultValue:null,description:"Should the image be fetched and inlined as <svg/>",name:"inline",required:!1,type:{name:"boolean"}},focalPoint:{defaultValue:null,description:"",name:"focalPoint",required:!1,type:{name:"string"}}}}}catch{}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},P.apply(this,arguments)}function K(e,n){if(e==null)return{};var s={},t=Object.keys(e),r,a;for(a=0;a<t.length;a++)r=t[a],!(n.indexOf(r)>=0)&&(s[r]=e[r]);return s}function L(e,n){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},L(e,n)}function J(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,L(e,n)}function le(e,n){return e.classList?!!n&&e.classList.contains(n):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")!==-1}function ue(e,n){e.classList?e.classList.add(n):le(e,n)||(typeof e.className=="string"?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function U(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ce(e,n){e.classList?e.classList.remove(n):typeof e.className=="string"?e.className=U(e.className,n):e.setAttribute("class",U(e.className&&e.className.baseVal||"",n))}const k={disabled:!1},Q=E.createContext(null);var Y=function(n){return n.scrollTop},_="unmounted",g="exited",x="entering",C="entered",M="exiting",v=function(e){J(n,e);function n(t,r){var a;a=e.call(this,t,r)||this;var i=r,o=i&&!i.isMounting?t.enter:t.appear,l;return a.appearStatus=null,t.in?o?(l=g,a.appearStatus=x):l=C:t.unmountOnExit||t.mountOnEnter?l=_:l=g,a.state={status:l},a.nextCallback=null,a}n.getDerivedStateFromProps=function(r,a){var i=r.in;return i&&a.status===_?{status:g}:null};var s=n.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(r){var a=null;if(r!==this.props){var i=this.state.status;this.props.in?i!==x&&i!==C&&(a=x):(i===x||i===C)&&(a=M)}this.updateStatus(!1,a)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var r=this.props.timeout,a,i,o;return a=i=o=r,r!=null&&typeof r!="number"&&(a=r.exit,i=r.enter,o=r.appear!==void 0?r.appear:i),{exit:a,enter:i,appear:o}},s.updateStatus=function(r,a){if(r===void 0&&(r=!1),a!==null)if(this.cancelNextCallback(),a===x){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this);i&&Y(i)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:_})},s.performEnter=function(r){var a=this,i=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[N.findDOMNode(this),o],u=l[0],d=l[1],c=this.getTimeouts(),m=o?c.appear:c.enter;if(!r&&!i||k.disabled){this.safeSetState({status:C},function(){a.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:x},function(){a.props.onEntering(u,d),a.onTransitionEnd(m,function(){a.safeSetState({status:C},function(){a.props.onEntered(u,d)})})})},s.performExit=function(){var r=this,a=this.props.exit,i=this.getTimeouts(),o=this.props.nodeRef?void 0:N.findDOMNode(this);if(!a||k.disabled){this.safeSetState({status:g},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:M},function(){r.props.onExiting(o),r.onTransitionEnd(i.exit,function(){r.safeSetState({status:g},function(){r.props.onExited(o)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(r,a){a=this.setNextCallback(a),this.setState(r,a)},s.setNextCallback=function(r){var a=this,i=!0;return this.nextCallback=function(o){i&&(i=!1,a.nextCallback=null,r(o))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},s.onTransitionEnd=function(r,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!i||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=l[0],d=l[1];this.props.addEndListener(u,d)}r!=null&&setTimeout(this.nextCallback,r)},s.render=function(){var r=this.state.status;if(r===_)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var o=K(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return E.createElement(Q.Provider,{value:null},typeof i=="function"?i(r,o):E.cloneElement(E.Children.only(i),o))},n}(E.Component);v.contextType=Q;v.propTypes={};function b(){}v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:b,onEntering:b,onEntered:b,onExit:b,onExiting:b,onExited:b};v.UNMOUNTED=_;v.EXITED=g;v.ENTERING=x;v.ENTERED=C;v.EXITING=M;const de=v;var pe=function(n,s){return n&&s&&s.split(" ").forEach(function(t){return ue(n,t)})},I=function(n,s){return n&&s&&s.split(" ").forEach(function(t){return ce(n,t)})},D=function(e){J(n,e);function n(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(o,l){var u=t.resolveArguments(o,l),d=u[0],c=u[1];t.removeClasses(d,"exit"),t.addClass(d,c?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(o,l)},t.onEntering=function(o,l){var u=t.resolveArguments(o,l),d=u[0],c=u[1],m=c?"appear":"enter";t.addClass(d,m,"active"),t.props.onEntering&&t.props.onEntering(o,l)},t.onEntered=function(o,l){var u=t.resolveArguments(o,l),d=u[0],c=u[1],m=c?"appear":"enter";t.removeClasses(d,m),t.addClass(d,m,"done"),t.props.onEntered&&t.props.onEntered(o,l)},t.onExit=function(o){var l=t.resolveArguments(o),u=l[0];t.removeClasses(u,"appear"),t.removeClasses(u,"enter"),t.addClass(u,"exit","base"),t.props.onExit&&t.props.onExit(o)},t.onExiting=function(o){var l=t.resolveArguments(o),u=l[0];t.addClass(u,"exit","active"),t.props.onExiting&&t.props.onExiting(o)},t.onExited=function(o){var l=t.resolveArguments(o),u=l[0];t.removeClasses(u,"exit"),t.addClass(u,"exit","done"),t.props.onExited&&t.props.onExited(o)},t.resolveArguments=function(o,l){return t.props.nodeRef?[t.props.nodeRef.current,o]:[o,l]},t.getClassNames=function(o){var l=t.props.classNames,u=typeof l=="string",d=u&&l?l+"-":"",c=u?""+d+o:l[o],m=u?c+"-active":l[o+"Active"],te=u?c+"-done":l[o+"Done"];return{baseClassName:c,activeClassName:m,doneClassName:te}},t}var s=n.prototype;return s.addClass=function(r,a,i){var o=this.getClassNames(a)[i+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;a==="appear"&&i==="done"&&u&&(o+=" "+u),i==="active"&&r&&Y(r),o&&(this.appliedClasses[a][i]=o,pe(r,o))},s.removeClasses=function(r,a){var i=this.appliedClasses[a],o=i.base,l=i.active,u=i.done;this.appliedClasses[a]={},o&&I(r,o),l&&I(r,l),u&&I(r,u)},s.render=function(){var r=this.props;r.classNames;var a=K(r,["classNames"]);return E.createElement(de,P({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(E.Component);D.defaultProps={classNames:""};D.propTypes={};const me=D;var h={};Object.defineProperty(h,"__esModule",{value:!0});var fe=Object.prototype.hasOwnProperty,y=function(e,n){return fe.call(e,n)},A=function(e){return e.constructor?new e.constructor:Object.create(null)},Z=function(e){var n=A(e);for(var s in e)y(e,s)&&(n[s]=e[s]);return n};function ve(e,n,s){var t;for(var r in n){var a=e[r],i=n[r];a!==i&&y(n,r)&&!(s&&a&&i&&s(a,i,r))&&(t||(t=Z(e)),t[r]=n[r])}return t||e}var he=function(e,n){var s,t=A(e);for(var r in e)if(y(e,r)){var a=e[r];a===void 0||a===null&&n?s=!0:t[r]=a}return s?t:e},ge=function(e){for(var n in e)if(y(e,n))return!1;return!0},xe=function(e,n,s){return e[s]===n[s]};function ee(e,n,s){if(s===void 0&&(s=xe),e===n)return!0;var t=Object.keys(e);if(t.length!==Object.keys(n).length)return!1;for(var r=0;r<t.length;r++){var a=t[r];if(!y(n,a)||!s(e,n,a))return!1}return!0}var Ee=function(e,n){var s,t=A(e);for(var r in e)y(e,r)&&(n.indexOf(r)>-1?t[r]=e[r]:s=!0);return s?t:e},ye=function(e,n){for(var s,t=n.length,r=0;r<t;r++){var a=n[r];y(e,a)&&(s=s||Z(e),delete s[a])}return s||e},be=function(e,n,s){return ee(e,n,s)?e:n},W=h.objectClean=he;h.objectIsEmpty=ge;var Ce=h.objectIsSame=ee;h.objectOnly=Ee;h.objectReplace=be;h.objectUpdate=ve;h.objectWithout=ye;var j=f,_e=oe,Ne={next:"Next",prev:"Previous"},Se=function(e){var n=e.bem,s=n===void 0?"CarouselPaging":n,t=e.modifier,r=e.current,a=e.itemCount,i=e.setCurrent,o=e.texts,l=o===void 0?Ne:o,u=l.next,d=l.prev,c=l.unit,m=c===void 0?"":c;return j.createElement("div",{className:_e(s,t)},j.createElement("button",{className:s+"__button "+s+"__button--next",type:"button",disabled:r>=a-1,onClick:function(){return i(r+1)},"aria-controls":e["aria-controls"],"aria-label":u+" "+m,title:u+" "+m},u)," ",j.createElement("button",{className:s+"__button "+s+"__button--prev",type:"button",disabled:r===0,onClick:function(){return i(r-1)},"aria-controls":e["aria-controls"],"aria-label":d+" "+m,title:d+" "+m},d))},Ie=Se;const je=re(Ie),R=e=>{const{caption:n,description:s,...t}=e;return p.jsxs("div",{className:"GalleryModalItem",children:[(n||s)&&p.jsxs("div",{className:"GalleryModalItem__text",children:[p.jsx("div",{className:"GalleryModalItem__caption",children:n}),p.jsx("div",{className:"GalleryModalItem__description",children:s})]}),p.jsx(O,{bem:"GalleryModalItem__image",src:t.largeImageSrc||t.src})]})};try{R.displayName="GalleryModalItem",R.__docgenInfo={description:"",displayName:"GalleryModalItem",props:{caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},largeImageSrc:{defaultValue:null,description:"",name:"largeImageSrc",required:!1,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!1,type:{name:"Source[]"}},src:{defaultValue:null,description:"The default image source to (lazy) load",name:"src",required:!1,type:{name:"string"}},preloadSrc:{defaultValue:null,description:"Eagerly-loaded placeholder/thunbnail to use until a `sources` item has been picked.",name:"preloadSrc",required:!1,type:{name:"string"}},inline:{defaultValue:null,description:"Should the image be fetched and inlined as <svg/>",name:"inline",required:!1,type:{name:"boolean"}},focalPoint:{defaultValue:null,description:"",name:"focalPoint",required:!1,type:{name:"string"}}}}}catch{}const w=e=>{const{texts:n}=e,{currentImage:s,items:t,setCurrentImage:r}=f.useContext(V),[a,i]=f.useState(s),[o,l]=f.useState(!1),u=c=>{l(!o),setTimeout(()=>{r(t[c])},200)};if(f.useEffect(()=>{if(a!==s){const c=(s==null?void 0:s.largeImageSrc)||(s==null?void 0:s.src);if(c){const m=new window.Image;m.src=c,m.onload=()=>{i(s)}}else i(void 0)}},[a,s]),!a)return null;const d=t.findIndex(c=>Ce(W(a),W(c)));return p.jsx(ie,{open:!0,onClosed:()=>{r(void 0)},startOpen:!1,bem:"GalleryModal",texts:{closeButton:n.modalCloseLabel},children:p.jsxs(p.Fragment,{children:[p.jsx(me,{in:o,timeout:200,onEntered:()=>{l(!o)},classNames:"GalleryModalItem--",children:p.jsx(R,{...a})}),p.jsx(je,{bem:"GalleryModalPager",itemCount:t.length,current:d,setCurrent:u,texts:{next:n.modalNextLabel,prev:n.modalPrevLabel}})]})})};try{w.displayName="GalleryModal",w.__docgenInfo={description:"",displayName:"GalleryModal",props:{texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"Readonly<GalleryI18n>"}}}}}catch{}const Te={en:{modalNextLabel:"Next image",modalPrevLabel:"Previous image",modalCloseLabel:"Back to article"},is:{modalNextLabel:"Næsta mynd",modalPrevLabel:"Fyrri mynd",modalCloseLabel:"Til baka í grein"},pl:{modalNextLabel:"Następne zdjęcie",modalPrevLabel:"Poprzednie zdjęcie",modalCloseLabel:"Powrót do artykułu"}},q=e=>{const{items:n,ssr:s}=e,t=ae(e,Te),[r,a]=f.useState(void 0),i=f.useMemo(()=>({items:n,setCurrentImage:a,currentImage:r}),[n,r]);return p.jsxs(V.Provider,{value:i,children:[p.jsx(ne,{bem:"Gallery",items:n,Component:G,ssr:s,wrapperProps:e.wrapperProps}),p.jsx(w,{...r,texts:t})]})};try{q.displayName="Gallery",q.__docgenInfo={description:"",displayName:"Gallery",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"GalleryItemProps[]"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"GalleryI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"enum",value:[{value:'"is"'},{value:'"en"'},{value:'"pl"'}]}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:"HTMLProps<null, never>"}},startSeen:{defaultValue:null,description:"@deprecated This prop does nothing nowadays (Will be removed in v0.11)",name:"startSeen",required:!1,type:{name:"boolean"}}}}}catch{}const z=""+new URL("Gallery--landscape-2189a681.jpg",import.meta.url).href,T=""+new URL("Gallery--portrait-761aaeee.jpg",import.meta.url).href,F=""+new URL("Gallery--portrait--large-e00de2e5.jpg",import.meta.url).href,Je={title:"Gallery",parameters:{controls:{hideNoControlsWarning:!0},viewport:{defaultViewport:"responsive"}}},Oe=[{caption:"Elliðaárdalur",largeImageSrc:$,src:z},{caption:"long caption here to test how this can break the layout",largeImageSrc:F,src:T,altText:"Elliðaárdalur alt text"},{largeImageSrc:$,src:z},{caption:"Test incorrect ratio",description:"Some description to go along with this image",largeImageSrc:F,src:T},{caption:"This one has a caption",src:T}],S={render:()=>p.jsx(q,{items:Oe})};var B,X,H;S.parameters={...S.parameters,docs:{...(B=S.parameters)==null?void 0:B.docs,source:{originalSource:`{
  render: () => <Gallery items={galleryData} />
}`,...(H=(X=S.parameters)==null?void 0:X.docs)==null?void 0:H.source}}};const Qe=["_Gallery"];export{S as _Gallery,Qe as __namedExportsOrder,Je as default};
//# sourceMappingURL=Gallery.stories-93b2a250.js.map

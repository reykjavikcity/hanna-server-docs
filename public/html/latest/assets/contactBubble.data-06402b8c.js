import{j as o}from"./jsx-runtime-f961835c.js";import{r as m}from"./index-f80c8c95.js";import{m as N}from"./classUtils-ef6e60eb.js";import{f as I}from"./focusElm-346ced9a.js";import{g as O}from"./i18n-18e56484.js";import{L as P}from"./_Link-b7c9c4c9.js";import{b as D}from"./breakOnNL-c6ba8973.js";import{u as R}from"./getScrollbarWidth-ee90c737.js";import{u as A}from"./browserSide-4379edd8.js";import"./getSVGtext-8f35f9ab.js";const M={is:{openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"},pl:{openBtn:"Skontaktuj siƒô z nami",closeBtn:"ZamknƒÖƒá",closeBtnLong:"ZamknƒÖƒá pƒôcherzyk"}},z={suggestions:1,phone:1,faq:1,livechat:1,other:0},_=t=>t&&z[t]?t:void 0,j=t=>{const{title:S,links:B,onToggle:u,alwaysShow:y,wrapperProps:w={}}=t,d=O(t,M),b=t.open==null,[q,C]=m.useState(!1),i=b?q:t.open,c=A(t.ssr),v=R(),T=m.useRef(null),f=w.ref||T,{openBubble:H,closeBubble:a}=m.useMemo(()=>({openBubble:()=>{b&&C(!0),u&&u(!0)},closeBubble:n=>{b&&C(!1),u&&u(!1),n!==!1&&I.focusElm(f.current)}}),[b,u]);if(m.useEffect(()=>{const n=f.current;if(!n)return;if(y){n.dataset.show="true";return}let s=0;const e=()=>{s||(s=requestAnimationFrame(()=>{const{scrollTop:l,scrollHeight:r,clientHeight:k}=document.documentElement,h=r-k,p=1,g=l>p*150&&h-l>p*250;n.dataset.show=String(g),!g&&a(!1),s=0}))};return e(),document.addEventListener("scroll",e),document.documentElement.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e),document.documentElement.removeEventListener("scroll",e)}},[c,y,a]),m.useEffect(()=>{const n=l=>l.key==="Escape"&&a(),s=l=>{var r;i&&!((r=f.current)!=null&&r.contains(l.target))&&a(!1)};document.addEventListener("keydown",n),document.addEventListener("click",s,!0);const e=document.documentElement.dataset;return i?e.contactBubble="true":delete e.contactBubble,()=>{delete e.contactBubble,document.removeEventListener("keydown",n),document.removeEventListener("click",s,!0)}},[i,a]),B.length===0)return null;const L=o.jsxs("div",{...t.wrapperProps,className:N("ContactBubble",null,w.className),id:c&&v,hidden:c&&!i,"data-always-show":y||void 0,"data-sprinkled":c,children:[o.jsx("h2",{className:"ContactBubble__title",children:S||d.openBtn}),o.jsx("ul",{className:"ContactBubble__list",children:B.map((n,s)=>{const{href:e,label:l,extraLabel:r,target:k,onClick:h}=n,p=_(n.icon),g=N("ContactBubble__item",p&&"type--"+p),x=V=>{h&&h()!==!0&&V.preventDefault(),a(!1)},E=[" ",l,`
`,r&&o.jsx("small",{children:D(r)},"ü§°"),`
`];return o.jsx("li",{className:g,children:e&&e!=="#"?o.jsx(P,{className:"ContactBubble__link",href:e,onClick:x,target:k,children:E}):o.jsx("button",{className:"ContactBubble__link",onClick:x,type:"button",children:E})},s)})}),`

`,c&&o.jsx("button",{className:"ContactBubble__closebtn","aria-controls":v,"aria-label":d.closeBtnLong,onClick:()=>a(),type:"button",children:d.closeBtn})]});return c?o.jsxs("div",{className:"ContactBubble__wrapper",ref:f,children:[o.jsx("button",{className:"ContactBubble__openbtn","aria-controls":v,"aria-expanded":i,"aria-label":d.openBtnLong,onClick:i?()=>a():H,type:"button",children:d.openBtn}),`

`,L]}):L};try{_.displayName="ensureIcon",_.__docgenInfo={description:"",displayName:"ensureIcon",props:{}}}catch{}try{j.displayName="ContactBubble",j.__docgenInfo={description:"",displayName:"ContactBubble",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},links:{defaultValue:null,description:"",name:"links",required:!0,type:{name:"ContactBubbleItem[]"}},alwaysShow:{defaultValue:null,description:`By default the ContactBubble's toggler is hidden if the page
is scrolled to near the top or the bottom.

This means that on short pages (with hardly any scrolling)
the ContactBubble __always__ hidden.

Set this prop to \`true\` if you want to disable this
magic and always show the bubble toggler`,name:"alwaysShow",required:!1,type:{name:"boolean"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"ContactBubbleI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"enum",value:[{value:'"is"'},{value:'"en"'},{value:'"pl"'}]}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:"HTMLProps<null, never>"}},open:{defaultValue:null,description:"",name:"open",required:!1,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!1,type:{name:"((isOpen: boolean) => void) | ((isOpen: boolean) => void)"}}}}}catch{}const ee={title:"Hva√∞ getum vi√∞ gert fyrir √æig?",links:[{href:"https://abendingar.reykjavik.is/",target:"_blank",label:"√Åbendingar",extraLabel:"Sendu okkur l√≠nu",icon:"suggestions"},{label:"Netspjall",extraLabel:"Opi√∞ virka daga kl. 8:30‚Äì16:00",onClick:()=>alert("Netspjall!!"),icon:"livechat"},{href:"/spurt-og-svarad",label:"Spurt og svara√∞",extraLabel:"Algengar spurningar og sv√∂r",icon:"faq"},{href:"tel:+3544111111",label:"√ûj√≥nustuver 411-1111",extraLabel:"Opi√∞ virka daga kl. 8:30‚Äì16:00",icon:"phone"},{href:"mailto:upplysingar@reykjavik.is",label:"upplysingar@reykjavik.is",extraLabel:"Sendu okkur l√≠nu",icon:"suggestions"}]};export{j as C,ee as c};
//# sourceMappingURL=contactBubble.data-06402b8c.js.map

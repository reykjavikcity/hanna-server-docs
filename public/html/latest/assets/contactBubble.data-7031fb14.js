import{j as o}from"./jsx-runtime-f961835c.js";import{r as p}from"./index-f80c8c95.js";import{m as j}from"./classUtils-ef6e60eb.js";import{f as P}from"./focusElm-346ced9a.js";import{g as D}from"./i18n-d547729d.js";import{L as R}from"./_Link-b7c9c4c9.js";import{b as A}from"./breakOnNL-c6ba8973.js";import{u as z}from"./_useMobileMenuToggling-15a67498.js";import{u as M}from"./browserSide-4379edd8.js";import"./getSVGtext-8f35f9ab.js";const Z={is:{openBtn:"Hafa samband",closeBtn:"Loka",closeBtnLong:"Loka valmynd"},en:{openBtn:"Contact us",closeBtn:"Close",closeBtnLong:"Close bubble"},pl:{openBtn:"Skontaktuj siƒô z nami",closeBtn:"ZamknƒÖƒá",closeBtnLong:"ZamknƒÖƒá pƒôcherzyk"}},F={suggestions:1,phone:1,faq:1,livechat:1,other:0},B=e=>e&&F[e]?e:void 0,S=e=>{const{title:q,links:_,onToggle:u,alwaysShow:v,wrapperProps:L={}}=e,m=D(e,Z),w=e.openBtnLabel||m.openBtn,T=e.openBtnLabel?void 0:m.openBtnLong,b=e.open==null,[V,C]=p.useState(!1),i=b?V:e.open,c=M(e.ssr),y=z(),H=p.useRef(null),f=L.ref||H,{openBubble:I,closeBubble:a}=p.useMemo(()=>({openBubble:()=>{b&&C(!0),u&&u(!0)},closeBubble:n=>{b&&C(!1),u&&u(!1),n!==!1&&P.focusElm(f.current)}}),[b,u]);if(p.useEffect(()=>{const n=f.current;if(!n)return;if(v){n.dataset.show="true";return}let l=0;const t=()=>{l||(l=requestAnimationFrame(()=>{const{scrollTop:s,scrollHeight:r,clientHeight:k}=document.documentElement,h=r-k,d=1,g=s>d*130&&h-s>d*200;n.dataset.show=String(g),!g&&a(!1),l=0}))};return t(),document.addEventListener("scroll",t),document.documentElement.addEventListener("scroll",t),()=>{document.removeEventListener("scroll",t),document.documentElement.removeEventListener("scroll",t)}},[c,v,a]),p.useEffect(()=>{const n=s=>s.key==="Escape"&&a(),l=s=>{var r;i&&!((r=f.current)!=null&&r.contains(s.target))&&a(!1)};document.addEventListener("keydown",n),document.addEventListener("click",l,!0);const t=document.documentElement.dataset;return i?t.contactBubble="true":delete t.contactBubble,()=>{delete t.contactBubble,document.removeEventListener("keydown",n),document.removeEventListener("click",l,!0)}},[i,a]),_.length===0)return null;const x=o.jsxs("div",{...e.wrapperProps,className:j("ContactBubble",null,L.className),id:c&&y,hidden:c&&!i,"data-label-openbtn":e.openBtnLabel,"data-always-show":v||void 0,"data-sprinkled":c,children:[o.jsx("h2",{className:"ContactBubble__title",children:q||w}),o.jsx("ul",{className:"ContactBubble__list",children:_.map((n,l)=>{const{href:t,label:s,extraLabel:r,target:k,onClick:h}=n,d=B(n.icon),g=j("ContactBubble__item",d&&`type--${d}`),E=O=>{h&&h()!==!0&&O.preventDefault(),a(!1)},N=[" ",s,`
`,r&&o.jsx("small",{children:A(r)},"ü§°"),`
`];return o.jsx("li",{className:g,children:t&&t!=="#"?o.jsx(R,{className:"ContactBubble__link",href:t,onClick:E,target:k,children:N}):o.jsx("button",{className:"ContactBubble__link",onClick:E,type:"button",children:N})},l)})}),`

`,c&&o.jsx("button",{className:"ContactBubble__closebtn","aria-controls":y,"aria-label":m.closeBtnLong,onClick:()=>a(),type:"button",children:m.closeBtn})]});return c?o.jsxs("div",{className:"ContactBubble__wrapper",ref:f,children:[o.jsx("button",{className:"ContactBubble__openbtn","aria-controls":y,"aria-expanded":i,"aria-label":T,onClick:i?()=>a():I,type:"button",children:w}),`

`,x]}):x};try{B.displayName="ensureIcon",B.__docgenInfo={description:"",displayName:"ensureIcon",props:{}}}catch{}try{S.displayName="ContactBubble",S.__docgenInfo={description:"",displayName:"ContactBubble",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},links:{defaultValue:null,description:"",name:"links",required:!0,type:{name:"ContactBubbleItem[]"}},alwaysShow:{defaultValue:null,description:`By default the ContactBubble's toggler is hidden if the page
is scrolled to near the top or the bottom.

This means that on short pages (with hardly any scrolling)
the ContactBubble __always__ hidden.

Set this prop to \`true\` if you want to disable this
magic and always show the bubble toggler`,name:"alwaysShow",required:!1,type:{name:"boolean"}},openBtnLabel:{defaultValue:null,description:"Shorthand override for texts.openBtn, for quick customization",name:"openBtnLabel",required:!1,type:{name:"string"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"ContactBubbleI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"enum",value:[{value:'"is"'},{value:'"en"'},{value:'"pl"'}]}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:"HTMLProps<null, never>"}},open:{defaultValue:null,description:"",name:"open",required:!1,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!1,type:{name:"((isOpen: boolean) => void) | ((isOpen: boolean) => void)"}}}}}catch{}const ne={title:"Hva√∞ getum vi√∞ gert fyrir √æig?",links:[{href:"https://abendingar.reykjavik.is/",target:"_blank",label:"√Åbendingar",extraLabel:"Sendu okkur l√≠nu",icon:"suggestions"},{label:"Netspjall",extraLabel:"Opi√∞ virka daga kl. 8:30‚Äì16:00",onClick:()=>alert("Netspjall!!"),icon:"livechat"},{href:"/spurt-og-svarad",label:"Spurt og svara√∞",extraLabel:"Algengar spurningar og sv√∂r",icon:"faq"},{href:"tel:+3544111111",label:"√ûj√≥nustuver 411-1111",extraLabel:"Opi√∞ virka daga kl. 8:30‚Äì16:00",icon:"phone"},{href:"mailto:upplysingar@reykjavik.is",label:"upplysingar@reykjavik.is",extraLabel:"Sendu okkur l√≠nu",icon:"suggestions"}]};export{S as C,ne as c};
//# sourceMappingURL=contactBubble.data-7031fb14.js.map

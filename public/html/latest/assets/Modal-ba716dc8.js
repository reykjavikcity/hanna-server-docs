import{r as E,g as k}from"./index-f80c8c95.js";import{t as O,a as g}from"./getBemClass-701a9212.js";import{d as w}from"./domid-a414b1fb.js";import{r as N}from"./index-64d4dcb8.js";import{f as $}from"./focusElm-346ced9a.js";function B(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t||void 0}var D=B,f=E,L=N,S=D;function x(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var P=x(S),R=function(){var t=document.createElement("div");return document.body.appendChild(t),t},T=function(t){var n=t.getRoot,o=t.children,e=f.useState(null),r=e[0],l=e[1];return f.useEffect(function(){return l((n||R)()),function(){r&&P.default(r)}},[]),r?L.createPortal(o,r):null},j=T,F=O,a=E,v=g,W=w,U=j,G=$;function q(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var z=q(W),d=typeof window<"u"?window:void 0,s=d?d.$$modalStack||(d.$$modalStack=[]):[],A=function(t){document.documentElement.classList.add(_),s.unshift(t)},h=function(t){var n=s.indexOf(t);n>-1&&s.splice(n,1),s.length<=0&&document.documentElement.classList.remove(_)},_="modal-open",H={closeButton:"Close",closeButtonLabel:"Close this window"},I=function(t){F.__extends(n,t);function n(o){var e=t.call(this,o)||this;return e.close=e.close.bind(e),e.closeModalOnCurtainClick=e.closeModalOnCurtainClick.bind(e),e.closeModalOnEsc=e.closeModalOnEsc.bind(e),e.state={open:!!o.startOpen&&o.open!==!1,domid:"Modal"},e}return n.prototype.componentDidMount=function(){this.setState({domid:this.state.domid+z.default()}),document.addEventListener("keydown",this.closeModalOnEsc),(this.props.open||this.state.open)&&this.open()},n.prototype.componentDidUpdate=function(o){var e=this.props.open;e!==o.open&&(e?this.open():this.close())},n.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.closeModalOnEsc),h(this)},n.prototype.open=function(){var o=this;A(this),this.state.open||setTimeout(function(){o.setState({open:!0}),o.props.onOpen&&o.props.onOpen(),o.modalElm&&G.focusElm(o.modalElm)},100)},n.prototype.close=function(){var o=this;this.state.open&&(this.setState({open:!1}),h(this),this.props.onClose&&this.props.onClose(),this.props.onClosed&&setTimeout(function(){o.props.onClosed()},this.props.closeDelay))},n.prototype.closeModalOnCurtainClick=function(o){o.target===o.currentTarget&&this.close()},n.prototype.closeModalOnEsc=function(o){s[0]===this&&this.props.fickle!==!1&&o.key==="Esc"&&this.close()},n.prototype.render=function(){var o=this,e=this.props,r=this.state.open,l=this.state.domid,i=e.bem||"Modal",C=e.fickle!==!1||void 0,c=e.texts||H,b=c.closeButton,p=c.closeButtonLabel,u=p===void 0?c.closeButton:p,y=e.portal?U:a.Fragment,m=e.render?e.render({closeModal:function(){return o.close()}}):e.children;return a.createElement(y,null,a.createElement("div",{className:v(i+"wrapper",e.modifier),hidden:!r,role:"dialog",onClick:C&&this.closeModalOnCurtainClick,id:l},a.createElement("div",{className:v(i,e.modifier),ref:function(M){o.modalElm=M}},e.bodyWrap?a.createElement("div",{className:i+"__body"},m):m,a.createElement("button",{className:i+"__closebutton",type:"button",onClick:this.close,"aria-label":u,"aria-controls":l,title:u},b))))},n.defaultProps={closeDelay:1e3,open:!0,portal:!0},n}(a.Component),J=I;const Z=k(J);export{Z as M};
//# sourceMappingURL=Modal-ba716dc8.js.map

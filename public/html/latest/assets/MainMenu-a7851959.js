import{j as n}from"./jsx-runtime-f961835c.js";import{r as p}from"./index-f80c8c95.js";import{m as v}from"./classUtils-ef6e60eb.js";import{f as w}from"./focusElm-346ced9a.js";import{g as G,D as R}from"./i18n-18e56484.js";import{L as I}from"./_Link-b7c9c4c9.js";import{g as W}from"./assets-ca39b462.js";import{e as Z,a as z}from"./getScrollbarWidth-70c1e033.js";import{u as $}from"./browserSide-4379edd8.js";import"./getSVGtext-8f35f9ab.js";const N=a=>{const{title:i,id:l,items:g,image:r}=a,u=r&&W(r);return n.jsxs("li",{className:"AuxiliaryPanel",id:l,style:u?{"--menu-auxiliary-image":`url(${u})`}:void 0,children:[n.jsx("h3",{className:"AuxiliaryPanel__title",children:i}),n.jsx("ul",{className:"AuxiliaryPanel__items",children:g.map((t,c)=>n.jsx("li",{className:v("AuxiliaryPanel__item",t.modifier),"aria-current":t.current||void 0,children:t.Content?n.jsx(t.Content,{}):n.jsx(I,{className:"AuxiliaryPanel__link",href:t.href,target:t.target,lang:t.lang,children:t.label})},c))})]})};try{N.displayName="AuxiliaryPanel",N.__docgenInfo={description:"",displayName:"AuxiliaryPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:'(Omit<{ current?: boolean | undefined; } & BemModifierProps & Cleanup<{ label: string; summary?: string | undefined; href: string; lang?: string | undefined; hrefLang?: string | undefined; target?: HTMLAttributeAnchorTarget | undefined; } & { ...; }>, "summary"> | Omit<...>)[]'}},image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"enum",value:[{value:'"hanna-veitiggi"'},{value:'"hanna-vandro"'},{value:'"hanna-hugsi"'},{value:'"hanna-hissa"'},{value:'"hanna-hahaha"'},{value:'"hanna-hae"'},{value:'"hanna-god_spurning"'},{value:'"hanna-gjuggiborg"'},{value:'"hanna-benda"'}]}}}}}catch{}const j=a=>{const{setActivePanel:i,panel:l,isParent:g,isActive:r,isBrowser:u,texts:t}=a,{items:c}=l;return n.jsxs("li",{ref:r?a.activeRef:void 0,className:v("PrimaryPanel",[g&&"parent",r&&"active",c.length>5&&"twocol"]),id:l.id,children:[n.jsxs("h3",{className:"PrimaryPanel__title",children:[" ",u&&!r?n.jsx("button",{className:"MainMenu__mega__title-toggler","aria-controls":l.id,onClick:()=>i(l,!1),"aria-pressed":r,type:"button",children:l.title}):l.title]}),n.jsx("ul",{className:"PrimaryPanel__items",children:c.map((s,m)=>n.jsx("li",{className:v("PrimaryPanel__item",s.modifier),"aria-current":s.current||void 0,children:s.Content?n.jsx(s.Content,{}):n.jsxs(I,{className:"PrimaryPanel__link",href:s.href,target:s.target,lang:s.lang,hrefLang:s.hrefLang,children:[n.jsx("span",{className:"PrimaryPanel__linkTitle",children:s.label})," ",n.jsx("small",{className:"PrimaryPanel__summary",children:s.summary})," "]})},m))}),u&&r&&n.jsx("button",{className:"MainMenu__megapanel__backtomenu","aria-controls":l.id,"aria-label":t.backToMenuLong,onClick:()=>i(void 0),type:"button",children:t.backToMenu})]})};try{j.displayName="PrimaryPanel",j.__docgenInfo={description:"",displayName:"PrimaryPanel",props:{setActivePanel:{defaultValue:null,description:"",name:"setActivePanel",required:!0,type:{name:"(panel: MegaMenuPanel | undefined, setFocus?: boolean | undefined) => void"}},isParent:{defaultValue:null,description:"",name:"isParent",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},panel:{defaultValue:null,description:"",name:"panel",required:!0,type:{name:"MegaMenuPanel"}},texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"PrimaryPanelI18n"}},activeRef:{defaultValue:null,description:"",name:"activeRef",required:!0,type:{name:"RefObject<HTMLLIElement>"}},isBrowser:{defaultValue:null,description:"",name:"isBrowser",required:!0,type:{name:"true | undefined"}}}}}catch{}const J=0,K=(a,i=J)=>{const[l,g]=p.useState(a),r=p.useRef(),u=()=>{r.current&&clearTimeout(r.current)},t=p.useRef((c,s=i)=>{g(c),u(),r.current=setTimeout(()=>{r.current=null,g(void 0)},s)}).current;return p.useEffect(()=>(a!==void 0&&t(a,i),u),[]),[l,t]},H=(a,i)=>i?a.find(l=>i===l.id):void 0,O={is:{title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},Q=(a,i,l,g)=>{const r=a.map(t=>{if(t==="---"||!("label"in t))return t;const c=t.href,s=t.controlsId||c&&/^#/.test(c)&&c.slice(1)||void 0,m=s?i.find(b=>b.id===s):void 0;return{...t,controlsId:s,megaPanel:m}}),u=r[0];return u&&(typeof u=="object"&&u.modifier==="home"||((!l||typeof l=="string")&&(l={href:l||"/",label:g.homeLabel||O[R].homeLabel,lang:g.homeLabel?void 0:R}),r.unshift({...l,modifier:"home"}))),r},X=[],S=a=>{const{megaPanels:i=X,onItemClick:l,ssr:g,auxiliaryPanel:r,wrapperProps:u={}}=a,t=G(a,O),c=a.title||t.title,{closeHamburgerMenu:s}=Z(),m=$(g),b=p.useRef(null),T=u.ref||b,A=p.useRef(null),E=p.useRef(null),[_,U]=p.useState(()=>m&&H(i,a.activePanelId)),[F,x]=K(),h=p.useMemo(()=>m?(e,d=!0)=>{const f=document.documentElement,o=f.dataset;U(y=>{if(e?(x(void 0,0),o.scrollTop=String(f.scrollTop),f.scrollTop=0,o.megaPanelActive=""):(y&&x(y,1e3),f.scrollTop=parseInt(o.scrollTop||"")||0,delete o.scrollTop,delete o.megaPanelActive),d){const P=A.current;setTimeout(()=>{e?e!==y&&w.focusElm(E.current):w.focusElm(P)},100)}return e})}:()=>{},[x,m]);z(e=>{e.leftTopmenu&&h(void 0)});const q=!!_,C=p.useMemo(()=>Q(a.items,i,a.homeLink,t),[a.items,a.homeLink,i,t]);if(p.useEffect(()=>{h(H(i,a.activePanelId))},[a.activePanelId,i,h]),p.useEffect(()=>{const e=T.current;if(!m||!q||!e)return;const d=o=>{o.key==="Escape"&&h(void 0)},f=o=>{e.contains(o.target)||h(void 0)};return document.addEventListener("keydown",d),document.addEventListener("click",f,!0),()=>{document.removeEventListener("keydown",d),document.removeEventListener("click",f,!0)}},[q,h,m]),C.length===0)return null;const B=e=>{e.target.closest("a[href]")&&(h(void 0),s())};return n.jsxs("nav",{...a.wrapperProps,className:v("MainMenu",null,u.className),"aria-label":c,"data-sprinkled":m,ref:T,children:[n.jsx("h2",{className:"MainMenu__title",children:c}),n.jsx("ul",{className:"MainMenu__items",children:C.map((e,d)=>{if(e==="---")return n.jsx("li",{className:"MainMenu__separator","aria-hidden":"true"},d);if(!("label"in e)){const M=e;return n.jsx("li",{className:"MainMenu__item",children:n.jsx(M,{})},d)}const{label:f,labelLong:o,lang:y,controlsId:P,onClick:k}=e,V=_&&P===_.id||void 0;return n.jsx("li",{className:v("MainMenu__item",e.modifier),"aria-current":e.current||void 0,children:k||e.megaPanel&&(m||!e.href)?n.jsx("button",{className:"MainMenu__link",onClick:()=>{const M=k&&k(d,e)===!1,D=l&&l(d,e)===!1,{megaPanel:L}=e;L?h(L!==_?L:void 0):!(M||D)&&s()},ref:V&&A,"aria-pressed":V,"aria-controls":P,"aria-label":o,title:o,lang:y,type:"button",children:f}):e.href!=null?n.jsx(I,{className:"MainMenu__link",href:e.href,target:e.target,"aria-label":o,title:o,onClick:()=>{!(l&&l(d,e)===!1)&&s()},lang:y,hrefLang:e.hrefLang,children:f}):void 0},d)})}),`

`,i.length>0&&n.jsx("div",{className:v("MainMenu__panelsWrap",[_&&"active"]),children:n.jsxs("ul",{className:"MainMenu__panels",onClick:B,children:[i.map((e,d)=>{if(!e.items.length)return;const f=_===e||F===e||void 0,o=!!e.items.find(y=>y.current);return n.jsx(j,{isParent:o,isActive:f,panel:e,isBrowser:m,setActivePanel:h,texts:t,activeRef:E},d)}),r&&n.jsx(N,{...r})]})})]})};try{S.displayName="MainMenu",S.__docgenInfo={description:"",displayName:"MainMenu",props:{title:{defaultValue:null,description:`Top-level screen-reader headline/label for the whole menu.
Defaults to a translation of "Main Menu"`,name:"title",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"MainMenuItemList"}},homeLink:{defaultValue:null,description:'Link for the homepage - defaults to `"/"` adding a\ngeneric sounding "Home"/"Forsíða" label',name:"homeLink",required:!1,type:{name:'string | Omit<MainMenuItem, "modifier">'}},megaPanels:{defaultValue:null,description:"",name:"megaPanels",required:!1,type:{name:"MegaMenuPanel[]"}},auxiliaryPanel:{defaultValue:null,description:"",name:"auxiliaryPanel",required:!1,type:{name:"AuxiliaryPanelProps"}},onItemClick:{defaultValue:null,description:'NOTE: Clicking a MainMenu item will automatically close HannaUIState\'s\n"Hamburger menu" (a.k.a. "Mobile menu")\n… unless the `onItemClick` function explicitly returns `false`.',name:"onItemClick",required:!1,type:{name:"((index: number, item: MainMenuItem) => boolean | void)"}},activePanelId:{defaultValue:null,description:"",name:"activePanelId",required:!1,type:{name:"string"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"Cleanup<{ homeLabel?: string; title: string; lang?: string; } & PrimaryPanelI18n> | undefined"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"enum",value:[{value:'"is"'},{value:'"en"'},{value:'"pl"'}]}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<null, "aria-label">'}}}}}catch{}export{S as M};
//# sourceMappingURL=MainMenu-a7851959.js.map

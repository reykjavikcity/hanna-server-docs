import{j as l}from"./jsx-runtime-f961835c.js";import{r as n}from"./index-f80c8c95.js";import{f as P}from"./focusElm-346ced9a.js";import{m as x}from"./getSVGtext-a8bc7f1c.js";import{g as T}from"./i18n-d547729d.js";import{F as E}from"./FocusTrap-e81f6d3e.js";import{u as A}from"./browserSide-4379edd8.js";import"./_Link-b7c9c4c9.js";import{u as j}from"./_useMobileMenuToggling-7bb485b9.js";import{u as I}from"./useCallbackOnEsc-c69f5e0c.js";import{r as F}from"./index-64d4dcb8.js";const $=()=>{const e=document.createElement("div");return document.body.appendChild(e),e},v=({getRoot:e,children:t})=>{const[s,m]=n.useState(null);return n.useEffect(()=>{const a=(e||$)();return m(a),()=>a.remove()},[]),s&&F.createPortal(t,s)};try{v.displayName="Portal",v.__docgenInfo={description:"",displayName:"Portal",props:{getRoot:{defaultValue:null,description:"",name:"getRoot",required:!1,type:{name:"(() => Element)"}}}}}catch{}const V="modal-open",C=typeof window<"u"?window:void 0,u=C?C.$$modalStack||(C.$$modalStack=[]):[],M=e=>{document.documentElement.classList.add(V),u.unshift(e)},O=e=>{const t=u.indexOf(e);t>-1&&u.splice(t,1),u.length<=0&&document.documentElement.classList.remove(V)},H={is:{closeButton:"Loka",closeButtonLabel:"Loka þessum glugga"},en:{closeButton:"Close",closeButtonLabel:"Close this window"},pl:{closeButton:"Zamknij",closeButtonLabel:"Zamknij to okno"}},q=e=>{const{bem:t,modifier:s,closeDelay:m=500,wrapperProps:a={},ssr:D}=e,k=!(e.stable??e.fickle===!1)||void 0,p=T(e,H),o=e.open!==!1,f=A(D),r=j(),h=a.id||r,w=n.useRef(null),[i,_]=n.useState(()=>!!e.startOpen&&o),S=()=>{i||(M(r),setTimeout(()=>{_(!0),P.focusElm(w.current,{delay:50}),e.onOpen&&e.onOpen()},50))},d=()=>{i&&(_(!1),O(r),e.onClose&&e.onClose(),setTimeout(e.onClosed,m))},b=n.useRef(o);o!==b.current&&o!==i&&(b.current=o,o?S():d()),b.current=o;const y=k&&(c=>{c.target===c.currentTarget&&d()});I(k&&(()=>{u[0]===h&&d()})),n.useEffect(()=>(i?M(r):o&&S(),()=>O(r)),[]);const L=e.portal!==!1?v:n.Fragment,N=e.render?e.render({closeModal:d}):e.children,B=p.closeButtonLabel||p.closeButton,{onClick:g,className:R}=a;return l.jsx(L,{children:l.jsxs("div",{...a,className:x(`${t}wrapper`,[s,R]),hidden:!i,role:"dialog",onClick:y&&g?c=>{y(c),g(c)}:y||g,id:h,children:[f&&l.jsx(E,{atTop:!0}),l.jsxs("div",{className:x(t,s),ref:w,children:[N,f&&!e.noCloseButton&&l.jsx("button",{className:`${t}__closebutton`,type:"button",onClick:d,"aria-label":B,"aria-controls":h,title:B,children:p.closeButton})]}),f&&l.jsx(E,{})]})})};try{q.displayName="AbstractModal",q.__docgenInfo={description:"",displayName:"AbstractModal",props:{closeDelay:{defaultValue:null,description:"The transition delay until closing the modal triggers `onClosed()`\n\nDefault: `500`",name:"closeDelay",required:!1,type:{name:"number"}},open:{defaultValue:null,description:`Indicates if the Modal should be open or closed. To trigger opening or
closing, simply flip this flag.

Default: \`true\``,name:"open",required:!1,type:{name:"boolean"}},startOpen:{defaultValue:null,description:'Set this to `true` for Modals that should render as if they always\nexisted and had already been opened.\n\nA Modal that "starts open" will not CSS transition in, and will not\ntrigger its `onOpen` callback on mount.\n\nDefault: `false`',name:"startOpen",required:!1,type:{name:"boolean"}},stable:{defaultValue:null,description:"By default all modals close on ESC and outside clicks.\nSet thtis to `true` to disable this behaviour.",name:"stable",required:!1,type:{name:"boolean"}},noCloseButton:{defaultValue:null,description:"Hides the (x) close button",name:"noCloseButton",required:!1,type:{name:"boolean"}},fickle:{defaultValue:null,description:"@deprecated Use `stable` prop instead  (Will be removed in v0.11)\n\nDefault: `true`\n\nThe inverse of the `stable` prop. If both `fickle` and `stable` are\ndefined then `stable` takes precedence.",name:"fickle",required:!1,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"Convenience callback that runs as soon as the `open` flag flips to `true`\n– including on initial opening.\n\nHowever, the initial `onOpen` is skipped when `startOpen` is set to `true`.",name:"onOpen",required:!1,type:{name:"(() => void)"}},onClose:{defaultValue:null,description:"Convenience callback that runs as soon as the `open` flag flips to `false`",name:"onClose",required:!1,type:{name:"(() => void)"}},onClosed:{defaultValue:null,description:"Callback that runs when the modal closes – **after** `closeDelay` has elaped.",name:"onClosed",required:!0,type:{name:"() => void"}},texts:{defaultValue:null,description:"Default:\n```\n{\n  closeButton: 'Close',\n  closeButtonLabel: 'Close this window',\n}\n```",name:"texts",required:!1,type:{name:"Readonly<{ closeButton: string; closeButtonLabel?: string; }>"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},portal:{defaultValue:null,description:"Should the modal be mounted in a Portal component `<div/>`\nlocated outside the ReactDOM.render root element?\n\nDefault: `true`",name:"portal",required:!1,type:{name:"boolean"}},render:{defaultValue:null,description:"Render function that receives a `closeModal` action dispatcher.",name:"render",required:!1,type:{name:"((props: { closeModal(): void; }) => ReactNode)"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<"div", "hidden" | "role">'}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},modifier:{defaultValue:null,description:`List of CSS BEM --modifier's to add to the component's main wrapper.

All falsy values are neatly skipped.`,name:"modifier",required:!1,type:{name:"ClassNameModifiers"}},bem:{defaultValue:null,description:"CSS BEM class-name prefix to be used for this component. Defaults to the same as the original component's displayName",name:"bem",required:!0,type:{name:"string"}}}}}catch{}export{q as A};
//# sourceMappingURL=_AbstractModal-0e0adefa.js.map

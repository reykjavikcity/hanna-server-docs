import{j as d}from"./jsx-runtime-f961835c.js";import{r as f,R as E,g as re}from"./index-f80c8c95.js";import{g as ne}from"./i18n-f5d14da7.js";import{A as ae}from"./_AbstractCarousel-08359c0f.js";import{B as se}from"./_Button-f001a419.js";import{I as O}from"./_Image-eec1c9c4.js";import{a as oe}from"./getBemClass-701a9212.js";import{M as ie}from"./Modal-ba716dc8.js";import{R as N}from"./index-64d4dcb8.js";import{c as $}from"./Gallery--landscape--large-1a6262ed.js";import"./classUtils-ef6e60eb.js";import"./focusElm-346ced9a.js";import"./getPageScrollElm-bb23cb91.js";import"./throttle-040182c3.js";import"./getSVGtext-a5d3ecb0.js";import"./addUrlParams-c54217db.js";import"./getScrollbarWidth-73ca1995.js";import"./index-603b371f.js";import"./hooks-d45327d9.js";import"./domid-a414b1fb.js";import"./_Link-b7c9c4c9.js";import"./useGetSVGtext-49da7148.js";const V=f.createContext({}),G=e=>{const{caption:a,description:s,largeImageSrc:t,...r}=e,{setCurrentImage:n}=f.useContext(V);return d.jsxs("figure",{className:"GalleryItem",children:[d.jsx("figcaption",{className:"GalleryItem__caption",children:a}),t?d.jsxs(se,{bem:"GalleryItem__button",href:t,onClick:i=>{i.preventDefault(),n({...r,caption:a,description:s,largeImageSrc:t})},children:[" ",d.jsx(O,{bem:"GalleryItem__image",...r})," "]}):d.jsx(O,{bem:"GalleryItem__image",...r}),s&&d.jsx("div",{className:"GalleryItem__description",children:s})]})};try{G.displayName="GalleryItem",G.__docgenInfo={description:"",displayName:"GalleryItem",props:{caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},largeImageSrc:{defaultValue:null,description:"",name:"largeImageSrc",required:!1,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!1,type:{name:"Source[]"}},src:{defaultValue:null,description:"The default image source to (lazy) load",name:"src",required:!1,type:{name:"string"}},preloadSrc:{defaultValue:null,description:"Eagerly-loaded placeholder/thunbnail to use until a `sources` item has been picked.",name:"preloadSrc",required:!1,type:{name:"string"}},inline:{defaultValue:null,description:"Should the image be fetched and inlined as <svg/>",name:"inline",required:!1,type:{name:"boolean"}},focalPoint:{defaultValue:null,description:"",name:"focalPoint",required:!1,type:{name:"string"}}}}}catch{}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},P.apply(this,arguments)}function K(e,a){if(e==null)return{};var s={},t=Object.keys(e),r,n;for(n=0;n<t.length;n++)r=t[n],!(a.indexOf(r)>=0)&&(s[r]=e[r]);return s}function M(e,a){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},M(e,a)}function J(e,a){e.prototype=Object.create(a.prototype),e.prototype.constructor=e,M(e,a)}function le(e,a){return e.classList?!!a&&e.classList.contains(a):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+a+" ")!==-1}function ue(e,a){e.classList?e.classList.add(a):le(e,a)||(typeof e.className=="string"?e.className=e.className+" "+a:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+a))}function U(e,a){return e.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ce(e,a){e.classList?e.classList.remove(a):typeof e.className=="string"?e.className=U(e.className,a):e.setAttribute("class",U(e.className&&e.className.baseVal||"",a))}const k={disabled:!1},Q=E.createContext(null);var Y=function(a){return a.scrollTop},_="unmounted",g="exited",x="entering",C="entered",L="exiting",v=function(e){J(a,e);function a(t,r){var n;n=e.call(this,t,r)||this;var i=r,o=i&&!i.isMounting?t.enter:t.appear,l;return n.appearStatus=null,t.in?o?(l=g,n.appearStatus=x):l=C:t.unmountOnExit||t.mountOnEnter?l=_:l=g,n.state={status:l},n.nextCallback=null,n}a.getDerivedStateFromProps=function(r,n){var i=r.in;return i&&n.status===_?{status:g}:null};var s=a.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(r){var n=null;if(r!==this.props){var i=this.state.status;this.props.in?i!==x&&i!==C&&(n=x):(i===x||i===C)&&(n=L)}this.updateStatus(!1,n)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var r=this.props.timeout,n,i,o;return n=i=o=r,r!=null&&typeof r!="number"&&(n=r.exit,i=r.enter,o=r.appear!==void 0?r.appear:i),{exit:n,enter:i,appear:o}},s.updateStatus=function(r,n){if(r===void 0&&(r=!1),n!==null)if(this.cancelNextCallback(),n===x){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this);i&&Y(i)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:_})},s.performEnter=function(r){var n=this,i=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[N.findDOMNode(this),o],u=l[0],p=l[1],c=this.getTimeouts(),m=o?c.appear:c.enter;if(!r&&!i||k.disabled){this.safeSetState({status:C},function(){n.props.onEntered(u)});return}this.props.onEnter(u,p),this.safeSetState({status:x},function(){n.props.onEntering(u,p),n.onTransitionEnd(m,function(){n.safeSetState({status:C},function(){n.props.onEntered(u,p)})})})},s.performExit=function(){var r=this,n=this.props.exit,i=this.getTimeouts(),o=this.props.nodeRef?void 0:N.findDOMNode(this);if(!n||k.disabled){this.safeSetState({status:g},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:L},function(){r.props.onExiting(o),r.onTransitionEnd(i.exit,function(){r.safeSetState({status:g},function(){r.props.onExited(o)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(r,n){n=this.setNextCallback(n),this.setState(r,n)},s.setNextCallback=function(r){var n=this,i=!0;return this.nextCallback=function(o){i&&(i=!1,n.nextCallback=null,r(o))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},s.onTransitionEnd=function(r,n){this.setNextCallback(n);var i=this.props.nodeRef?this.props.nodeRef.current:N.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!i||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=l[0],p=l[1];this.props.addEndListener(u,p)}r!=null&&setTimeout(this.nextCallback,r)},s.render=function(){var r=this.state.status;if(r===_)return null;var n=this.props,i=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var o=K(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return E.createElement(Q.Provider,{value:null},typeof i=="function"?i(r,o):E.cloneElement(E.Children.only(i),o))},a}(E.Component);v.contextType=Q;v.propTypes={};function b(){}v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:b,onEntering:b,onEntered:b,onExit:b,onExiting:b,onExited:b};v.UNMOUNTED=_;v.EXITED=g;v.ENTERING=x;v.ENTERED=C;v.EXITING=L;const pe=v;var de=function(a,s){return a&&s&&s.split(" ").forEach(function(t){return ue(a,t)})},I=function(a,s){return a&&s&&s.split(" ").forEach(function(t){return ce(a,t)})},D=function(e){J(a,e);function a(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(o,l){var u=t.resolveArguments(o,l),p=u[0],c=u[1];t.removeClasses(p,"exit"),t.addClass(p,c?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(o,l)},t.onEntering=function(o,l){var u=t.resolveArguments(o,l),p=u[0],c=u[1],m=c?"appear":"enter";t.addClass(p,m,"active"),t.props.onEntering&&t.props.onEntering(o,l)},t.onEntered=function(o,l){var u=t.resolveArguments(o,l),p=u[0],c=u[1],m=c?"appear":"enter";t.removeClasses(p,m),t.addClass(p,m,"done"),t.props.onEntered&&t.props.onEntered(o,l)},t.onExit=function(o){var l=t.resolveArguments(o),u=l[0];t.removeClasses(u,"appear"),t.removeClasses(u,"enter"),t.addClass(u,"exit","base"),t.props.onExit&&t.props.onExit(o)},t.onExiting=function(o){var l=t.resolveArguments(o),u=l[0];t.addClass(u,"exit","active"),t.props.onExiting&&t.props.onExiting(o)},t.onExited=function(o){var l=t.resolveArguments(o),u=l[0];t.removeClasses(u,"exit"),t.addClass(u,"exit","done"),t.props.onExited&&t.props.onExited(o)},t.resolveArguments=function(o,l){return t.props.nodeRef?[t.props.nodeRef.current,o]:[o,l]},t.getClassNames=function(o){var l=t.props.classNames,u=typeof l=="string",p=u&&l?l+"-":"",c=u?""+p+o:l[o],m=u?c+"-active":l[o+"Active"],te=u?c+"-done":l[o+"Done"];return{baseClassName:c,activeClassName:m,doneClassName:te}},t}var s=a.prototype;return s.addClass=function(r,n,i){var o=this.getClassNames(n)[i+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;n==="appear"&&i==="done"&&u&&(o+=" "+u),i==="active"&&r&&Y(r),o&&(this.appliedClasses[n][i]=o,de(r,o))},s.removeClasses=function(r,n){var i=this.appliedClasses[n],o=i.base,l=i.active,u=i.done;this.appliedClasses[n]={},o&&I(r,o),l&&I(r,l),u&&I(r,u)},s.render=function(){var r=this.props;r.classNames;var n=K(r,["classNames"]);return E.createElement(pe,P({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a}(E.Component);D.defaultProps={classNames:""};D.propTypes={};const me=D;var h={};Object.defineProperty(h,"__esModule",{value:!0});var fe=Object.prototype.hasOwnProperty,y=function(e,a){return fe.call(e,a)},A=function(e){return e.constructor?new e.constructor:Object.create(null)},Z=function(e){var a=A(e);for(var s in e)y(e,s)&&(a[s]=e[s]);return a};function ve(e,a,s){var t;for(var r in a){var n=e[r],i=a[r];n!==i&&y(a,r)&&!(s&&n&&i&&s(n,i,r))&&(t||(t=Z(e)),t[r]=a[r])}return t||e}var he=function(e,a){var s,t=A(e);for(var r in e)if(y(e,r)){var n=e[r];n===void 0||n===null&&a?s=!0:t[r]=n}return s?t:e},ge=function(e){for(var a in e)if(y(e,a))return!1;return!0},xe=function(e,a,s){return e[s]===a[s]};function ee(e,a,s){if(s===void 0&&(s=xe),e===a)return!0;var t=Object.keys(e);if(t.length!==Object.keys(a).length)return!1;for(var r=0;r<t.length;r++){var n=t[r];if(!y(a,n)||!s(e,a,n))return!1}return!0}var Ee=function(e,a){var s,t=A(e);for(var r in e)y(e,r)&&(a.indexOf(r)>-1?t[r]=e[r]:s=!0);return s?t:e},ye=function(e,a){for(var s,t=a.length,r=0;r<t;r++){var n=a[r];y(e,n)&&(s=s||Z(e),delete s[n])}return s||e},be=function(e,a,s){return ee(e,a,s)?e:a},W=h.objectClean=he;h.objectIsEmpty=ge;var Ce=h.objectIsSame=ee;h.objectOnly=Ee;h.objectReplace=be;h.objectUpdate=ve;h.objectWithout=ye;var j=f,_e=oe,Ne={next:"Next",prev:"Previous"},Se=function(e){var a=e.bem,s=a===void 0?"CarouselPaging":a,t=e.modifier,r=e.current,n=e.itemCount,i=e.setCurrent,o=e.texts,l=o===void 0?Ne:o,u=l.next,p=l.prev,c=l.unit,m=c===void 0?"":c;return j.createElement("div",{className:_e(s,t)},j.createElement("button",{className:s+"__button "+s+"__button--next",type:"button",disabled:r>=n-1,onClick:function(){return i(r+1)},"aria-controls":e["aria-controls"],"aria-label":u+" "+m,title:u+" "+m},u)," ",j.createElement("button",{className:s+"__button "+s+"__button--prev",type:"button",disabled:r===0,onClick:function(){return i(r-1)},"aria-controls":e["aria-controls"],"aria-label":p+" "+m,title:p+" "+m},p))},Ie=Se;const je=re(Ie),R=e=>{const{caption:a,description:s,...t}=e;return d.jsxs("div",{className:"GalleryModalItem",children:[(a||s)&&d.jsxs("div",{className:"GalleryModalItem__text",children:[d.jsx("div",{className:"GalleryModalItem__caption",children:a}),d.jsx("div",{className:"GalleryModalItem__description",children:s})]}),d.jsx(O,{bem:"GalleryModalItem__image",src:t.largeImageSrc||t.src})]})};try{R.displayName="GalleryModalItem",R.__docgenInfo={description:"",displayName:"GalleryModalItem",props:{caption:{defaultValue:null,description:"",name:"caption",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},largeImageSrc:{defaultValue:null,description:"",name:"largeImageSrc",required:!1,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!1,type:{name:"Source[]"}},src:{defaultValue:null,description:"The default image source to (lazy) load",name:"src",required:!1,type:{name:"string"}},preloadSrc:{defaultValue:null,description:"Eagerly-loaded placeholder/thunbnail to use until a `sources` item has been picked.",name:"preloadSrc",required:!1,type:{name:"string"}},inline:{defaultValue:null,description:"Should the image be fetched and inlined as <svg/>",name:"inline",required:!1,type:{name:"boolean"}},focalPoint:{defaultValue:null,description:"",name:"focalPoint",required:!1,type:{name:"string"}}}}}catch{}const w=e=>{const{texts:a}=e,{currentImage:s,items:t,setCurrentImage:r}=f.useContext(V),[n,i]=f.useState(s),[o,l]=f.useState(!1),u=c=>{l(!o),setTimeout(()=>{r(t[c])},200)};if(f.useEffect(()=>{if(n!==s){const c=(s==null?void 0:s.largeImageSrc)||(s==null?void 0:s.src);if(c){const m=new window.Image;m.src=c,m.onload=()=>{i(s)}}else i(void 0)}},[n,s]),!n)return null;const p=t.findIndex(c=>Ce(W(n),W(c)));return d.jsx(ie,{open:!0,onClosed:()=>{r(void 0)},startOpen:!1,bem:"GalleryModal",texts:{closeButton:a.modalCloseLabel},children:d.jsxs(d.Fragment,{children:[d.jsx(me,{in:o,timeout:200,onEntered:()=>{l(!o)},classNames:"GalleryModalItem--",children:d.jsx(R,{...n})}),d.jsx(je,{bem:"GalleryModalPager",itemCount:t.length,current:p,setCurrent:u,texts:{next:a.modalNextLabel,prev:a.modalPrevLabel}})]})})};try{w.displayName="GalleryModal",w.__docgenInfo={description:"",displayName:"GalleryModal",props:{texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"Readonly<GalleryI18n>"}}}}}catch{}const Te={en:{modalNextLabel:"Next image",modalPrevLabel:"Previous image",modalCloseLabel:"Back to article"},is:{modalNextLabel:"Næsta mynd",modalPrevLabel:"Fyrri mynd",modalCloseLabel:"Til baka í grein"}},q=e=>{const{items:a,ssr:s}=e,t=ne(e,Te),[r,n]=f.useState(void 0),i=f.useMemo(()=>({items:a,setCurrentImage:n,currentImage:r}),[a,r]);return d.jsxs(V.Provider,{value:i,children:[d.jsx(ae,{bem:"Gallery",items:a,Component:G,ssr:s,wrapperProps:e.wrapperProps}),d.jsx(w,{...r,texts:t})]})};try{q.displayName="Gallery",q.__docgenInfo={description:"",displayName:"Gallery",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"GalleryItemProps[]"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"GalleryI18n"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:"HTMLProps<null, never>"}},startSeen:{defaultValue:null,description:"@deprecated This prop does nothing nowadays (Will be removed in v0.11)",name:"startSeen",required:!1,type:{name:"boolean"}}}}}catch{}const F=""+new URL("Gallery--landscape-2189a681.jpg",import.meta.url).href,T=""+new URL("Gallery--portrait-761aaeee.jpg",import.meta.url).href,B=""+new URL("Gallery--portrait--large-e00de2e5.jpg",import.meta.url).href,Ye={title:"Gallery",parameters:{controls:{hideNoControlsWarning:!0},viewport:{defaultViewport:"responsive"}}},Oe=[{caption:"Elliðaárdalur",largeImageSrc:$,src:F},{caption:"long caption here to test how this can break the layout",largeImageSrc:B,src:T,altText:"Elliðaárdalur alt text"},{largeImageSrc:$,src:F},{caption:"Test incorrect ratio",description:"Some description to go along with this image",largeImageSrc:B,src:T},{caption:"This one has a caption",src:T}],S={render:()=>d.jsx(q,{items:Oe})};var X,H,z;S.parameters={...S.parameters,docs:{...(X=S.parameters)==null?void 0:X.docs,source:{originalSource:`{
  render: () => <Gallery items={galleryData} />
}`,...(z=(H=S.parameters)==null?void 0:H.docs)==null?void 0:z.source}}};const Ze=["_Gallery"];export{S as _Gallery,Ze as __namedExportsOrder,Ye as default};
//# sourceMappingURL=Gallery.stories-e36abdcd.js.map

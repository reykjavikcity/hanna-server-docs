import{j as n}from"./jsx-runtime-f961835c.js";import{g as W,r as h}from"./index-f80c8c95.js";import{m as _}from"./classUtils-ef6e60eb.js";import{f as R}from"./focusElm-346ced9a.js";import{h as Z}from"./hooks-d45327d9.js";import{g as z}from"./i18n-f5d14da7.js";import{L}from"./_Link-b7c9c4c9.js";import{a as G}from"./assets-41f88d07.js";import{b as J,u as K}from"./getScrollbarWidth-73ca1995.js";import{h as Q}from"./index-603b371f.js";import"./getSVGtext-a5d3ecb0.js";var S=h,H=Z,X=0,Y=function(a,r){r===void 0&&(r=X);var l=S.useState(a),p=l[0],s=l[1],c=S.useRef(),t=function(){c.current&&clearTimeout(c.current)},u=H.useConst(function(i,o){o===void 0&&(o=r),s(i),t(),c.current=setTimeout(function(){c.current=null,s(void 0)},o)});return H.useOnMount(function(){return a!==void 0&&u(a,r),t}),[p,u]},ee=Y;const ne=W(ee),I=a=>{const{title:r,id:l,items:p,image:s}=a,c=s&&G(s);return n.jsxs("li",{className:"AuxiliaryPanel",id:l,style:c?{"--menu-auxiliary-image":`url(${c})`}:void 0,children:[n.jsx("h3",{className:"AuxiliaryPanel__title",children:r}),n.jsx("ul",{className:"AuxiliaryPanel__items",children:p.map((t,u)=>n.jsx("li",{className:_("AuxiliaryPanel__item",t.modifier),"aria-current":t.current||void 0,children:t.Content?n.jsx(t.Content,{}):n.jsx(L,{className:"AuxiliaryPanel__link",href:t.href,target:t.target,lang:t.lang,children:t.label})},u))})]})};try{I.displayName="AuxiliaryPanel",I.__docgenInfo={description:"",displayName:"AuxiliaryPanel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:'(Omit<{ current?: boolean | undefined; modifier?: Modifiers; } & Cleanup<{ label: string; summary?: string | undefined; href: string; lang?: string | undefined; target?: HTMLAttributeAnchorTarget | undefined; } & { ...; }>, "summary"> | Omit<...>)[]'}},image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"enum",value:[{value:'"hanna-veitiggi"'},{value:'"hanna-vandro"'},{value:'"hanna-hugsi"'},{value:'"hanna-hissa"'},{value:'"hanna-hahaha"'},{value:'"hanna-hae"'},{value:'"hanna-god_spurning"'},{value:'"hanna-gjuggiborg"'},{value:'"hanna-benda"'}]}}}}}catch{}const T=a=>{const{setActivePanel:r,panel:l,isParent:p,isActive:s,isBrowser:c,texts:t}=a,{items:u}=l;return n.jsxs("li",{ref:s?a.activeRef:void 0,className:_("PrimaryPanel",[p&&"parent",s&&"active",u.length>5&&"twocol"]),id:l.id,children:[n.jsxs("h3",{className:"PrimaryPanel__title",children:[" ",c&&!s?n.jsx("button",{className:"MainMenu__mega__title-toggler","aria-controls":l.id,onClick:()=>r(l,!1),"aria-pressed":s,type:"button",children:l.title}):l.title]}),n.jsx("ul",{className:"PrimaryPanel__items",children:u.map((i,o)=>n.jsx("li",{className:_("PrimaryPanel__item",i.modifier),"aria-current":i.current||void 0,children:i.Content?n.jsx(i.Content,{}):n.jsxs(L,{className:"PrimaryPanel__link",href:i.href,target:i.target,lang:i.lang,children:[n.jsx("span",{className:"PrimaryPanel__linkTitle",children:i.label})," ",n.jsx("small",{className:"PrimaryPanel__summary",children:i.summary})," "]})},o))}),c&&s&&n.jsx("button",{className:"MainMenu__megapanel__backtomenu","aria-controls":l.id,"aria-label":t.backToMenuLong,onClick:()=>r(void 0),type:"button",children:t.backToMenu})]})};try{T.displayName="PrimaryPanel",T.__docgenInfo={description:"",displayName:"PrimaryPanel",props:{setActivePanel:{defaultValue:null,description:"",name:"setActivePanel",required:!0,type:{name:"(panel: MegaMenuPanel | undefined, setFocus?: boolean | undefined) => void"}},isParent:{defaultValue:null,description:"",name:"isParent",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},panel:{defaultValue:null,description:"",name:"panel",required:!0,type:{name:"MegaMenuPanel"}},texts:{defaultValue:null,description:"",name:"texts",required:!0,type:{name:"PrimaryPanelI18n"}},activeRef:{defaultValue:null,description:"",name:"activeRef",required:!0,type:{name:"RefObject<HTMLLIElement>"}},isBrowser:{defaultValue:null,description:"",name:"isBrowser",required:!0,type:{name:"true | undefined"}}}}}catch{}const O=(a,r)=>r?a.find(l=>r===l.id):void 0,b={is:{lang:"is",title:"Aðalvalmynd",homeLabel:"Forsíða",backToMenu:"Loka",backToMenuLong:"Til baka í valmynd"},en:{lang:"en",title:"Main Menu",homeLabel:"Home page",backToMenu:"Close",backToMenuLong:"Close and return to menu"},pl:{lang:"pl",title:"Menu główne",homeLabel:"Strona główna",backToMenu:"Zamknij",backToMenuLong:"Zamknij i wróć do menu"}},ae=(a,r,l,p)=>{const s=a.map(t=>{if(t==="---"||!("label"in t))return t;const u=t.href,i=t.controlsId||u&&/^#/.test(u)&&u.slice(1)||void 0,o=i?r.find(x=>x.id===i):void 0;return{...t,controlsId:i,megaPanel:o}}),c=s[0];if(c&&!(typeof c=="object"&&c.modifier==="home")){if(!l||typeof l=="string"){let u=p.homeLabel,i;if(u==null){const o=b[p.lang||"en"]||b.en||b.is;u=o.homeLabel,i=o.lang}l={href:l||"/",label:u,lang:i}}s.unshift({...l,modifier:"home"})}return s},te=[],F=a=>{const{megaPanels:r=te,onItemClick:l,ssr:p,auxiliaryPanel:s,wrapperProps:c={}}=a,t=z(a,b),u=a.title||t.title,{closeHamburgerMenu:i}=J(),o=Q.useIsBrowserSide(p),x=h.useRef(null),A=c.ref||x,C=h.useRef(null),E=h.useRef(null),[v,U]=h.useState(()=>o&&O(r,a.activePanelId)),[B,k]=ne(),g=h.useMemo(()=>o?(e,m=!0)=>{const f=document.documentElement,d=f.dataset;U(y=>{if(e?(k(void 0,0),d.scrollTop=String(f.scrollTop),f.scrollTop=0,d.megaPanelActive=""):(y&&k(y,1e3),f.scrollTop=parseInt(d.scrollTop||"")||0,delete d.scrollTop,delete d.megaPanelActive),m){const M=C.current;setTimeout(()=>{e?e!==y&&R.focusElm(E.current):R.focusElm(M)},100)}return e})}:()=>{},[k,o]);K(e=>{e.leftTopmenu&&g(void 0)});const q=!!v,V=h.useMemo(()=>ae(a.items,r,a.homeLink,t),[a.items,a.homeLink,r,t]);if(h.useEffect(()=>{g(O(r,a.activePanelId))},[a.activePanelId,r,g]),h.useEffect(()=>{const e=A.current;if(!o||!q||!e)return;const m=d=>{d.key==="Escape"&&g(void 0)},f=d=>{e.contains(d.target)||g(void 0)};return document.addEventListener("keydown",m),document.addEventListener("click",f,!0),()=>{document.removeEventListener("keydown",m),document.removeEventListener("click",f,!0)}},[q,g,o]),V.length===0)return null;const D=e=>{e.target.closest("a[href]")&&(g(void 0),i())};return n.jsxs("nav",{...a.wrapperProps,className:_("MainMenu",null,c.className),"aria-label":u,"data-sprinkled":o,ref:A,children:[n.jsx("h2",{className:"MainMenu__title",children:u}),n.jsx("ul",{className:"MainMenu__items",children:V.map((e,m)=>{if(e==="---")return n.jsx("li",{className:"MainMenu__separator","aria-hidden":"true"},m);if(!("label"in e)){const P=e;return n.jsx("li",{className:"MainMenu__item",children:n.jsx(P,{})},m)}const{label:f,labelLong:d,lang:y,controlsId:M,onClick:j}=e,w=v&&M===v.id||void 0;return n.jsx("li",{className:_("MainMenu__item",e.modifier),"aria-current":e.current||void 0,children:j||e.megaPanel&&(o||!e.href)?n.jsx("button",{className:"MainMenu__link",onClick:()=>{const P=j&&j(m,e)===!1,$=l&&l(m,e)===!1,{megaPanel:N}=e;N?g(N!==v?N:void 0):!(P||$)&&i()},ref:w&&C,"aria-pressed":w,"aria-controls":M,"aria-label":d,title:d,lang:y,type:"button",children:f}):e.href!=null?n.jsx(L,{className:"MainMenu__link",href:e.href,target:e.target,"aria-label":d,title:d,onClick:()=>{!(l&&l(m,e)===!1)&&i()},lang:y,children:f}):void 0},m)})}),`

`,r.length>0&&n.jsx("div",{className:_("MainMenu__panelsWrap",[v&&"active"]),children:n.jsxs("ul",{className:"MainMenu__panels",onClick:D,children:[r.map((e,m)=>{if(!e.items.length)return;const f=v===e||B===e||void 0,d=!!e.items.find(y=>y.current);return n.jsx(T,{isParent:d,isActive:f,panel:e,isBrowser:o,setActivePanel:g,texts:t,activeRef:E},m)}),s&&n.jsx(I,{...s})]})})]})};try{F.displayName="MainMenu",F.__docgenInfo={description:"",displayName:"MainMenu",props:{title:{defaultValue:null,description:`Top-level screen-reader headline/label for the whole menu.
Defaults to a translation of "Main Menu"`,name:"title",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"MainMenuItemList"}},homeLink:{defaultValue:null,description:'Link for the homepage - defaults to `"/"` adding a\ngeneric sounding "Home"/"Forsíða" label',name:"homeLink",required:!1,type:{name:'string | Omit<MainMenuItem, "modifier">'}},megaPanels:{defaultValue:null,description:"",name:"megaPanels",required:!1,type:{name:"MegaMenuPanel[]"}},auxiliaryPanel:{defaultValue:null,description:"",name:"auxiliaryPanel",required:!1,type:{name:"AuxiliaryPanelProps"}},onItemClick:{defaultValue:null,description:'NOTE: Clicking a MainMenu item will automatically close HannaUIState\'s\n"Hamburger menu" (a.k.a. "Mobile menu")\n… unless the `onItemClick` function explicitly returns `false`.',name:"onItemClick",required:!1,type:{name:"((index: number, item: MainMenuItem) => boolean | void)"}},activePanelId:{defaultValue:null,description:"",name:"activePanelId",required:!1,type:{name:"string"}},texts:{defaultValue:null,description:"",name:"texts",required:!1,type:{name:"Cleanup<{ lang?: string; homeLabel?: string; title: string; } & PrimaryPanelI18n> | undefined"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<null, "aria-label">'}}}}}catch{}export{F as M};
//# sourceMappingURL=MainMenu-fdeea40a.js.map

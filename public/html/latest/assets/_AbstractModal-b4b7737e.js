import{j as s}from"./jsx-runtime-f961835c.js";import{r as n}from"./index-f80c8c95.js";import{f as T}from"./focusElm-346ced9a.js";import{m as E}from"./getSVGtext-6e71cb30.js";import{g as A}from"./i18n-d547729d.js";import{F as M}from"./FocusTrap-08bc24ce.js";import{u as j}from"./browserSide-4379edd8.js";import"./_Link-b7c9c4c9.js";import{u as I}from"./_useMobileMenuToggling-b033ca8f.js";import{u as F}from"./useCallbackOnEsc-c69f5e0c.js";import{r as $}from"./index-64d4dcb8.js";const H=()=>{const e=document.createElement("div");return document.body.appendChild(e),e},v=({getRoot:e,children:t})=>{const[r,m]=n.useState(null);return n.useEffect(()=>{const a=(e||H)();return m(a),()=>a.remove()},[]),r&&$.createPortal(t,r)};try{v.displayName="Portal",v.__docgenInfo={description:"",displayName:"Portal",props:{getRoot:{defaultValue:null,description:"",name:"getRoot",required:!1,type:{name:"(() => Element)"}}}}}catch{}const D="modal-open",C=typeof window<"u"?window:void 0,c=C?C.$$modalStack||(C.$$modalStack=[]):[],O=e=>{document.documentElement.classList.add(D),c.unshift(e)},V=e=>{const t=c.indexOf(e);t>-1&&c.splice(t,1),c.length<=0&&document.documentElement.classList.remove(D)},G={is:{closeButton:"Loka",closeButtonLabel:"Loka þessum glugga"},en:{closeButton:"Close",closeButtonLabel:"Close this window"},pl:{closeButton:"Zamknij",closeButtonLabel:"Zamknij to okno"}},q=e=>{const{bem:t,modifier:r,closeDelay:m=500,wrapperProps:a={},ssr:L}=e,k=!(e.stable??e.fickle===!1)||void 0,p=A(e,G),o=e.open!==!1,f=j(L),i=I(),h=a.id||i,w=n.useRef(null),[l,S]=n.useState(()=>!!e.startOpen&&o),[N,_]=n.useState(l),B=()=>{l||(O(i),_(!0),setTimeout(()=>{S(!0),T.focusElm(w.current,{delay:50}),e.onOpen&&e.onOpen()},50))},d=()=>{l&&(S(!1),V(i),e.onClose&&e.onClose(),setTimeout(()=>{_(!1),e.onClosed()},m))},b=n.useRef(o);o!==b.current&&o!==l&&(b.current=o,o?B():d()),b.current=o;const y=k&&(u=>{u.target===u.currentTarget&&d()});F(k&&(()=>{c[0]===h&&d()})),n.useEffect(()=>(l?O(i):o&&B(),()=>V(i)),[]);const R=e.portal!==!1?v:n.Fragment,x=p.closeButtonLabel||p.closeButton,{onClick:g,className:P}=a;return s.jsx(R,{children:N&&s.jsxs("div",{...a,className:E(`${t}wrapper`,[r,P]),hidden:!l,role:"dialog",onClick:y&&g?u=>{y(u),g(u)}:y||g,id:h,children:[f&&s.jsx(M,{atTop:!0}),s.jsxs("div",{className:E(t,r),ref:w,children:[e.render?e.render({closeModal:d}):e.children,f&&!e.noCloseButton&&s.jsx("button",{className:`${t}__closebutton`,type:"button",onClick:d,"aria-label":x,"aria-controls":h,title:x,children:p.closeButton})]}),f&&s.jsx(M,{})]})})};try{q.displayName="AbstractModal",q.__docgenInfo={description:"",displayName:"AbstractModal",props:{closeDelay:{defaultValue:null,description:"The transition delay until closing the modal triggers `onClosed()`\n\nDefault: `500`",name:"closeDelay",required:!1,type:{name:"number"}},open:{defaultValue:null,description:`Indicates if the Modal should be open or closed. To trigger opening or
closing, simply flip this flag.

Default: \`true\``,name:"open",required:!1,type:{name:"boolean"}},startOpen:{defaultValue:null,description:'Set this to `true` for Modals that should render as if they always\nexisted and had already been opened.\n\nA Modal that "starts open" will not CSS transition in, and will not\ntrigger its `onOpen` callback on mount.\n\nDefault: `false`',name:"startOpen",required:!1,type:{name:"boolean"}},stable:{defaultValue:null,description:"By default all modals close on ESC and outside clicks.\nSet thtis to `true` to disable this behaviour.",name:"stable",required:!1,type:{name:"boolean"}},noCloseButton:{defaultValue:null,description:"Hides the (x) close button",name:"noCloseButton",required:!1,type:{name:"boolean"}},fickle:{defaultValue:null,description:"@deprecated Use `stable` prop instead  (Will be removed in v0.11)\n\nDefault: `true`\n\nThe inverse of the `stable` prop. If both `fickle` and `stable` are\ndefined then `stable` takes precedence.",name:"fickle",required:!1,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"Convenience callback that runs as soon as the `open` flag flips to `true`\n– including on initial opening.\n\nHowever, the initial `onOpen` is skipped when `startOpen` is set to `true`.",name:"onOpen",required:!1,type:{name:"(() => void)"}},onClose:{defaultValue:null,description:"Convenience callback that runs as soon as the `open` flag flips to `false`",name:"onClose",required:!1,type:{name:"(() => void)"}},onClosed:{defaultValue:null,description:"Callback that runs when the modal closes – **after** `closeDelay` has elaped.",name:"onClosed",required:!0,type:{name:"() => void"}},texts:{defaultValue:null,description:"Default:\n```\n{\n  closeButton: 'Close',\n  closeButtonLabel: 'Close this window',\n}\n```",name:"texts",required:!1,type:{name:"Readonly<{ closeButton: string; closeButtonLabel?: string; }>"}},lang:{defaultValue:null,description:"",name:"lang",required:!1,type:{name:"string"}},portal:{defaultValue:null,description:"Should the modal be mounted in a Portal component `<div/>`\nlocated outside the ReactDOM.render root element?\n\nDefault: `true`",name:"portal",required:!1,type:{name:"boolean"}},render:{defaultValue:null,description:"Render function that receives a `closeModal` action dispatcher.",name:"render",required:!1,type:{name:"((props: { closeModal(): void; }) => ReactNode)"}},wrapperProps:{defaultValue:null,description:`Custom HTML attributes for the component's wrapper element.

Note, however, that some props may be intentionally
excluded from the list.

__WARNING:__
In some cases props added this way can break the component, og hurt its
accessibility.  Also, some props may get ignored, or over-ridden by the
component. User discretion is advised.`,name:"wrapperProps",required:!1,type:{name:'HTMLProps<"div", "hidden" | "role">'}},ssr:{defaultValue:null,description:`Indicates whether server-side rendering is supported or not.

The \`ssr-only\` value is useful for cases where you need
to demo the server-rendered version in a browser.`,name:"ssr",required:!1,type:{name:"SSRSupport"}},modifier:{defaultValue:null,description:`List of CSS BEM --modifier's to add to the component's main wrapper.

All falsy values are neatly skipped.`,name:"modifier",required:!1,type:{name:"ClassNameModifiers"}},bem:{defaultValue:null,description:"CSS BEM class-name prefix to be used for this component. Defaults to the same as the original component's displayName",name:"bem",required:!0,type:{name:"string"}}}}}catch{}export{q as A};
//# sourceMappingURL=_AbstractModal-b4b7737e.js.map
